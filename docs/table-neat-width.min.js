window.NACSS=window.NACSS||{},function(t){function n(t,n){const e=document.createElement(n);return e.style.display="inline-block",e.style.position="fixed",e.style.visibility="hidden",e.style.whiteSpace="nowrap",t.appendChild(e)}function e(t,n){if(0===t.rows.length)return!1;if(n.maxRowSize<t.rows.length)return!1;if(!function(t,n){const{cellMinWidth:e,cellMinAspect:i}=n;for(const n of t.rows)if(n.hasChildNodes())for(const t of n.childNodes){const n=t.tagName;if("TD"!==n&&"TH"!==n)continue;if(1<parseInt(t.getAttribute("colSpan"),10))continue;if(1<parseInt(t.getAttribute("rowSpan"),10))continue;const o=t.clientWidth,r=t.clientHeight;if(o<e||o/r<i)return!0}return!1}(t,n))return!1;t.hasAttribute("width")&&t.removeAttribute("width"),t.style.width="",t.style.maxWidth="";const e=function(t){const n=function(t,n=[]){for(const e of t.rows){const t=[];if(e.hasChildNodes())for(const n of e.childNodes){const e=n.tagName;"TD"!==e&&"TH"!==e||t.push(n)}n.push(t)}return n}(t);let e=0;for(const t of n)e=Math.max(e,t.length);const i=[];for(const t of n)i.push(new Array(e));for(let t=0;t<i.length;t+=1){const o=i[t],r=n[t];let l=0;for(let n=0;n<e;n+=1){if("number"==typeof o[n]||null===o[n])continue;const e=r[l],c=parseInt(e.getAttribute("colSpan")??1,10),s=parseInt(e.getAttribute("rowSpan")??1,10);if(o[n]=e,1<c)for(let t=1;t<c;t+=1)o[n+t]=t;if(1<s)for(let e=1;e<s;e+=1){const o=i[t+e];for(let t=0;t<c;t+=1)o[n+t]=null}if(l+=1,r.length<=l)break}}return i}(t);return function(t,n){for(const e of t)for(let t=0;t<e.length;t+=1){const i=e[t],o=n[t];!1!==o&&i instanceof HTMLTableCellElement&&(i.style.whiteSpace=null,i.style.minWidth=o+"px",i.style.width=null)}}(e,function(t,n){for(const n of t)for(const t of n)"number"!=typeof t&&null!==t&&(t.style.whiteSpace="nowrap");const e=t[0].length,o=new Array(e).fill(!1),r=new Array(e).fill(!1);for(let l=0;l<t.length;l+=1){const c=t[l];for(let t=0;t<e;t+=1){const l=c[t];if(null==l||"number"==typeof l)continue;if(t<e-1&&"number"==typeof c[t+1])continue;if(1<parseInt(l.getAttribute("colSpan"),10))continue;if(1<parseInt(l.getAttribute("rowSpan"),10))continue;const[s,a]=i(l,n);s&&(o[t]=Math.max(o[t],s)),a&&(r[t]=a)}}return function(t,n,e){const{origTabW:i,origCellWs:o}=e;let r=0,l=0;for(let e=0;e<t.length;e+=1)n[e]?r+=t[e]:t[e]?l+=t[e]:l+=o[e];if(i<r+l)return;let c=i-l;for(let e=0;e<t.length;e+=1){if(!n[e])continue;const i=t[e],l=Math.min(i/r*c,o[e]);c-=l-i,r-=l-i,t[e]=0|l}}(o,r,n),o}(e,Object.assign(function(t,n){const e=t.clientWidth,i=[];for(let t=0;t<n[0].length;t+=1)for(let e=0;e<n.length;e+=1){const o=n[e][t];if(o instanceof HTMLTableCellElement&&!o.getAttribute("colSpan")){i.push(o.clientWidth);break}}return{origTabW:e,origCellWs:i}}(t,e),n))),!0}function i(t,n){const{padH:e,padV:i,charW:o,lineH:r,cellMinWidth:l,dcTd:c,dcTh:s,cellMinAspect:a,minCharSize:f}=n;if(function(t){const n=t.innerHTML.trim();let e=n.split(/<\s*br\s*\/?>/iu);0===e.length&&(e=[n]);const i=e.map((t=>t.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"").length));return Math.max(...i)}(t)<f)return[0,!1];t.innerHTML=t.innerHTML.trim();const d="TD"===t.tagName?c:s;d.innerHTML=t.innerHTML;const h=d.clientWidth-e,u=Math.round((d.clientHeight-i)/r);let p=0,g=!1;for(let t=1;;t+=1){const n=0|h/t+o*t+e,c=u*(t*r)+i;if(n<l||n/c<a||p&&p<n)break;1<t&&(g=!0),p=n}return[p,g]}window.NACSS.tableNeatWidth=function(t,i={}){if(0===t.length)return;const o=t[t.length-1],r=Object.assign(i,function(t){const n=t.getElementsByTagName("td")[0],e=getComputedStyle(n),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),o=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[r,l]=function(t){const n=document.createElement(t.nodeName);n.setAttribute("style",`position:fixed;margin:0;padding:0;font-family:${t.style.fontFamily||"inherit"};font-size:${t.style.fontSize||"inherit"};`),n.innerHTML="ã€€",t.parentNode.appendChild(n);const e=n.clientWidth,i=n.clientHeight;return n.parentNode.removeChild(n),[e,i]}(n);return{padH:i,padV:o,charW:r,lineH:l}}(o),{nnwMinWidthRate:.1,minCharSize:8,cellMinWidth:100,cellMinAspect:2/3,maxRowSize:200,maxBorderWidth:2});r.padH+=2*r.maxBorderWidth,r.padV+=2*r.maxBorderWidth,r.dcTd=n(o,"td"),r.dcTh=n(o,"th");for(const n of t)if(!e(n,r)&&r.nnwMinWidthRate){const t=n.parentElement.clientWidth,e=n.clientWidth;t-e<e*r.nnwMinWidthRate&&(n.style.width="100%")}o.removeChild(r.dcTd),o.removeChild(r.dcTh)}}();
//# sourceMappingURL=table-neat-width.min.js.map
