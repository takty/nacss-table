window.NACSS=window.NACSS||{},function(t){function e(t,e){const n=document.createElement(e);return n.style.display="inline-block",n.style.position="fixed",n.style.visibility="hidden",n.style.whiteSpace="nowrap",t.appendChild(n)}function n(t,e){if(0===t.rows.length)return!1;if(e.maxRowSize<t.rows.length)return!1;if(!function(t,e){const{cellMinWidth:n,cellMinAspect:i}=e;for(const e of t.rows)if(e.hasChildNodes())for(const t of e.childNodes){const e=t.tagName;if("TD"!==e&&"TH"!==e)continue;if(1<parseInt(t.getAttribute("colSpan"),10))continue;if(1<parseInt(t.getAttribute("rowSpan"),10))continue;const o=t.clientWidth,r=t.clientHeight;if(o<n||o/r<i)return!0}return!1}(t,e))return!1;t.hasAttribute("width")&&t.removeAttribute("width"),t.style.width="",t.style.maxWidth="";const n=function(t){const e=function(t,e=[]){for(const n of t.rows){const t=[];if(n.hasChildNodes())for(const e of n.childNodes){const n=e.tagName;"TD"!==n&&"TH"!==n||t.push(e)}e.push(t)}return e}(t);let n=0;for(const t of e)n=Math.max(n,t.length);const i=[];for(const t of e)i.push(new Array(n));for(let t=0;t<i.length;t+=1){const o=i[t],r=e[t];let l=0;for(let e=0;e<n;e+=1){if("number"==typeof o[e]||null===o[e])continue;const n=r[l],c=parseInt(n.getAttribute("colSpan"),10),s=parseInt(n.getAttribute("rowSpan"),10);if(o[e]=n,1<c)for(let t=1;t<c;t+=1)o[e+t]=t;if(1<s)for(let n=1;n<s;n+=1){const o=i[t+n];for(let t=0;t<c;t+=1)o[e+t]=null}if(l+=1,r.length<=l)break}}return i}(t);return function(t,e){for(const n of t)for(let t=0;t<n.length;t+=1){const i=n[t],o=e[t];!1!==o&&i instanceof HTMLTableCellElement&&(i.style.whiteSpace=null,i.style.minWidth=o+"px",i.style.width=null)}}(n,function(t,e){for(const e of t)for(const t of e)"number"!=typeof t&&null!==t&&(t.style.whiteSpace="nowrap");const n=t[0].length,o=new Array(n).fill(!1),r=new Array(n).fill(!1);for(let l=0;l<t.length;l+=1){const c=t[l];for(let t=0;t<n;t+=1){const l=c[t];if(null==l||"number"==typeof l)continue;if(t<n-1&&"number"==typeof c[t+1])continue;if(1<parseInt(l.getAttribute("colSpan"),10))continue;if(1<parseInt(l.getAttribute("rowSpan"),10))continue;const[s,a]=i(l,e);s&&(o[t]=Math.max(o[t],s)),a&&(r[t]=a)}}return function(t,e,n){const{origTabW:i,origCellWs:o}=n;let r=0,l=0;for(let n=0;n<t.length;n+=1)e[n]?r+=t[n]:t[n]?l+=t[n]:l+=o[n];if(i<r+l)return;let c=i-l;for(let n=0;n<t.length;n+=1){if(!e[n])continue;const i=t[n],l=Math.min(i/r*c,o[n]);c-=l-i,r-=l-i,t[n]=0|l}}(o,r,e),o}(n,Object.assign(function(t,e){const n=t.clientWidth,i=[];for(let t=0;t<e[0].length;t+=1)for(let n=0;n<e.length;n+=1){const o=e[n][t];if(o instanceof HTMLTableCellElement&&!o.getAttribute("colSpan")){i.push(o.clientWidth);break}}return{origTabW:n,origCellWs:i}}(t,n),e))),!0}function i(t,e){const{padH:n,padV:i,charW:o,lineH:r,cellMinWidth:l,dcTd:c,dcTh:s,cellMinAspect:a}=e;t.innerHTML=t.innerHTML.trim();const f="TD"===t.tagName?c:s;f.innerHTML=t.innerHTML;const d=f.clientWidth-n,h=Math.round((f.clientHeight-i)/r);let u=0,p=!1;for(let t=1;;t+=1){const e=0|d/t+o*t+n,c=h*(t*r)+i;if(e<l||e/c<a)break;1<t&&(p=!0),u=e}return[u,p]}window.NACSS.tableNeatWidth=function(t,i={}){if(0===t.length)return;const o=t[t.length-1],r=Object.assign(i,function(t){const e=t.getElementsByTagName("td")[0],n=getComputedStyle(e),i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),o=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),[r,l]=function(t){const e=document.createElement(t.nodeName);e.setAttribute("style",`position:fixed;margin:0;padding:0;font-family:${t.style.fontFamily||"inherit"};font-size:${t.style.fontSize||"inherit"};`),e.innerHTML="X",t.parentNode.appendChild(e);const n=e.clientWidth,i=e.clientHeight;return e.parentNode.removeChild(e),[n,i]}(e);return{padH:i,padV:o,charW:r,lineH:l}}(o),{nnwMinWidthRate:.1,cellMinWidth:100,cellMinAspect:1,maxRowSize:200,maxBorderWidth:2});r.padH+=2*r.maxBorderWidth,r.padV+=2*r.maxBorderWidth,r.dcTd=e(o,"td"),r.dcTh=e(o,"th");for(const e of t)if(!n(e,r)&&r.nnwMinWidthRate){const t=e.parentElement.clientWidth,n=e.clientWidth;t-n<n*r.nnwMinWidthRate&&(e.style.width="100%")}o.removeChild(r.dcTd),o.removeChild(r.dcTh)}}();
//# sourceMappingURL=table-neat-width.min.js.map
