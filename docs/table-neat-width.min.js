window.NACSS=window.NACSS||{},function(e){function t(e,t){let l=e.tHead;if(!l){if(l=function(e){const t=e.tBodies[0].rows;if(0===t.length)return null;function l(e){const t=e.getElementsByTagName("td"),l=e.getElementsByTagName("th");return 0===t.length&&l.length>0}const n=[];for(const e of t){if(!l(e))break;n.push(e)}if(0===n.length)return null;const o=e.createTHead();for(const e of n)o.appendChild(e);return o}(e),!l)return null;e.tHead=l}const n=document.createElement("div");enableClass(!0,n,t.styleHeaderContainer),e.parentNode.appendChild(n);const o=document.createElement("div");return enableClass(!0,o,t.styleHeaderTable),n.appendChild(o),o.appendChild(l.cloneNode(!0)),n}function l(e,t){const l=document.createElement("div");enableClass(!0,l,t.styleScrollBar);const n=document.createElement("div");return l.appendChild(n),e.parentNode.appendChild(l),l}function n(e,t,l,n,i){t.style.overflowX=t.scrollWidth<t.clientWidth+2?"hidden":null,l&&function(e,t,l,n){const o=e?e.width:t.getBoundingClientRect().width;l.style.maxWidth=o+"px",l.style.display="none",l.style.top=n.offset+"px";const s=t.tHead,i=s.getBoundingClientRect().width,d=l.firstChild;d.style.width=i+"px";const c=s.rows,r=d.firstChild.rows;for(let e=0;e<c.length;e+=1)a(c[e],r[e],"td"),a(c[e],r[e],"th");function a(e,t,l){const n=e.getElementsByTagName(l),o=t.getElementsByTagName(l);for(let e=0;e<n.length;e+=1)o[e].style.width=n[e].getBoundingClientRect().width+"px"}}(e,t,l,i),n&&function(e,t){const l=e.scrollWidth<e.clientWidth+2;t.style.overflowX=l?"hidden":null,t.style.pointerEvents=l?"none":null,t.style.maxWidth=`${e.clientWidth}px`,t.style.display="none";const n=parseInt(function(e){const t=document.createElement("div");t.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),e.appendChild(t);let l=0|window.getComputedStyle(t).getPropertyValue("width");if(0===l){t.style.overflowY="scroll",t.style.width="";const e=document.createElement("div");e.style.minHeight="100px",t.appendChild(e);const n=0|window.getComputedStyle(e).getPropertyValue("width");l=t.offsetWidth-n}return e.removeChild(t),l}(document.documentElement));0<n&&(t.style.height=n+2+"px");t.firstChild.style.width=`${e.scrollWidth}px`}(t,n),(l||n)&&o(t,l,n,i),l&&s(t,l,i)}function o(e,t,l,n){const o=e.getBoundingClientRect(),s=o.bottom,i=e.tHead.getBoundingClientRect(),d=i.top,c=i.bottom,r=n.offset,a=window.innerHeight,f=s-d<n.capableWindowHeightRate*(a-r),h=o.left,u=e.scrollLeft;if(t){const l=e.tHead.offsetHeight;!function(e,t,l,n){e.style.display=t?"block":"none",e.style.left=l+"px",e.scrollLeft=n}(t,!f&&d<r&&r<s-l,h,u)}if(l){!function(e,t,l,n){e.style.display=t?"block":"none",e.style.left=l+"px",e.scrollLeft=n}(l,!f&&c<a&&a<s,h,u)}}function s(e,t,l){const n=Math.max(0,Math.min(e.scrollLeft,e.scrollWidth-e.offsetWidth));if(t.scrollLeft=n,e.scrollWidth-e.clientWidth>2){const n=e.scrollLeft/(e.scrollWidth-e.clientWidth);enableClass(n<.95,t,l.styleScrollRight),enableClass(.05<n,t,l.styleScrollLeft)}else enableClass(!1,t,l.styleScrollRight),enableClass(!1,t,l.styleScrollLeft)}window.NACSS.tableNeatWidth=function(e,i={}){if(0===e.length)return;const d=Object.assign({capableWindowHeightRate:.9,styleHeaderContainer:":fixedTableHeaderContainer",styleHeaderTable:":fixedTableHeaderTable",styleScrollBar:":fixedTableScrollBar",styleFixedHeader:":ncFixedHeader",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft",offset:0},i),c=[],r=[...e];for(const e of r){const n=t(e,d),o=l(e,d);c.push({tab:e,head:n,bar:o});let i=!1;const r=(t,l)=>throttle((()=>{i?i=!1:(i=!0,l.scrollLeft=t.scrollLeft,n&&s(e,n,d))}));e.addEventListener("scroll",r(e,o)),o.addEventListener("scroll",r(o,e))}const a=new ResizeObserver((e=>{for(const t of e){const e=r.indexOf(t.target),l=c[e];n(t.contentRect,l.tab,l.head,l.bar,d)}}));for(const e of r)a.observe(e);window.addEventListener("scroll",throttle((()=>{for(const e of c)o(e.tab,e.head,e.bar,d)})),{passive:!0});const f=(h=d.styleFixedHeader,h.startsWith(":")?`*[data-${h.substr(1).replace(/([A-Z])/g,(e=>"-"+e.charAt(0).toLowerCase()))}]`:`*${h}`);var h;if(f){console.log(f);const e=document.querySelector(f);if(e){new ResizeObserver((e=>{d.offset=e[0].contentRect.bottom;for(const e of c)n(null,e.tab,e.head,e.bar,d)})).observe(e)}}}}();
//# sourceMappingURL=table-neat-width.min.js.map
