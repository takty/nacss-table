{"version":3,"sources":["table-usable-view.js"],"names":["window","NACSS","NS","_createHeaderClone","tab","cm","thead","tHead","_createPseudoHeader","hc","document","createElement","enableClass","styleHeaderContainer","parentNode","appendChild","ht","styleHeaderTable","cloneNode","trs","tBodies","rows","length","containsOnlyTh","tr","tds","getElementsByTagName","ths","trsH","push","createTHead","_createBarClone","bar","styleScrollBar","spacer","onResize","r","head","style","overflowX","scrollWidth","clientWidth","_updateHeaderSize","_updateScrollBarSize","onWindowScroll","onTableScroll","tw","width","getBoundingClientRect","maxWidth","display","top","offset","hw","firstChild","oTrs","cTrs","i","copyWidth","o","c","tag","os","cs","disabled","pointerEvents","h","parseInt","getScrollBarWidth","documentElement","height","tBottom","bottom","rh","hTop","hBottom","wY0","wY1","innerHeight","inView","capableWindowHeightRate","tLeft","left","tScrollLeft","scrollLeft","hCy","offsetHeight","_updateHeaderVisibility","_updateBarVisibility","visible","tabLeft","tabScrollLeft","sL","Math","max","min","offsetWidth","styleScrollRight","styleScrollLeft","getSelector","cls","startsWith","substr","replace","charAt","toLowerCase","parent","d","setAttribute","getComputedStyle","getPropertyValue","overflowY","minHeight","cw","removeChild","tableUsableView","tabs","opts","Object","assign","styleFixedHeader","ts","forced","el","tar","op","throttle","addEventListener","ro","ResizeObserver","es","e","idx","indexOf","target","contentRect","t","observe","passive","sel","elm","querySelector"],"mappings":"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","file":"table-usable-view.min.js","sourcesContent":["/**\n *\n * Table Style - Usable View (JS)\n *\n * @author Takuto Yanagida\n * @version 2021-01-25\n *\n */\n\n\nwindow.NACSS = window['NACSS'] || {};\n\n\n(function (NS) {\n\n\t/**\n\t *\n\t * Usable View\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-01-25\n\t *\n\t */\n\t\n\t\n\tfunction initialize(tabs, opts = {}) {\n\t\tif (tabs.length === 0) return;\n\t\tconst cm = Object.assign({\n\t\t\tcapableWindowHeightRate: 0.9,\n\t\t\tstyleHeaderContainer   : ':ncTableFixedHeaderContainer',\n\t\t\tstyleHeaderTable       : ':ncTableFixedHeaderTable',\n\t\t\tstyleScrollBar         : ':ncTableFixedScrollBar',\n\t\n\t\t\tstyleFixedHeader       : ':ncFixedHeader',\n\t\t\tstyleScrollRight       : ':ncScrollRight',\n\t\t\tstyleScrollLeft        : ':ncScrollLeft',\n\t\t\toffset                 : 0,\n\t\t}, opts);\n\t\n\t\tconst cs = [], ts = [...tabs];\n\t\tfor (const tab of ts) {\n\t\t\tconst head = _createHeaderClone(tab, cm);\n\t\t\tconst bar  = _createBarClone(tab, cm);\n\t\t\tcs.push({ tab, head, bar });\n\t\n\t\t\tlet forced = false;\n\t\t\tconst el = (tar, op) => throttle(() => {\n\t\t\t\tif (forced) {\n\t\t\t\t\tforced = false;\n\t\t\t\t} else {\n\t\t\t\t\tforced = true;\n\t\t\t\t\top.scrollLeft = tar.scrollLeft;\n\t\t\t\t\tif (head) onTableScroll(tab, head, cm);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttab.addEventListener('scroll', el(tab, bar));\n\t\t\tbar.addEventListener('scroll', el(bar, tab));\n\t\t}\n\t\tconst ro = new ResizeObserver((es) => {\n\t\t\tfor (const e of es) {\n\t\t\t\tconst idx = ts.indexOf(e.target);\n\t\t\t\tconst c = cs[idx];\n\t\t\t\tonResize(e.contentRect, c.tab, c.head, c.bar, cm);\n\t\t\t}\n\t\t});\n\t\tfor (const t of ts) ro.observe(t);\n\t\n\t\twindow.addEventListener('scroll', throttle(() => {\n\t\t\tfor (const c of cs) onWindowScroll(c.tab, c.head, c.bar, cm);\n\t\t}), { passive: true });\n\t\n\t\tconst sel = getSelector(cm.styleFixedHeader);\n\t\tif (sel) {\n\t\t\tconst elm = document.querySelector(sel);\n\t\t\tif (elm) {\n\t\t\t\tconst rob = new ResizeObserver(es => {\n\t\t\t\t\tcm.offset = es[0].contentRect.bottom;\n\t\t\t\t\tfor (const c of cs) onResize(null, c.tab, c.head, c.bar, cm);\n\t\t\t\t});\n\t\t\t\trob.observe(elm);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _createHeaderClone(tab, cm) {\n\t\tlet thead = tab.tHead;\n\t\tif (!thead) {\n\t\t\tthead = _createPseudoHeader(tab);\n\t\t\tif (!thead) return null;\n\t\t\ttab.tHead = thead;\n\t\t}\n\t\tconst hc = document.createElement('div');\n\t\tenableClass(true, hc, cm.styleHeaderContainer);\n\t\ttab.parentNode.appendChild(hc);\n\t\n\t\tconst ht = document.createElement('div');\n\t\tenableClass(true, ht, cm.styleHeaderTable);\n\t\thc.appendChild(ht);\n\t\n\t\tht.appendChild(thead.cloneNode(true));\n\t\treturn hc;\n\t}\n\t\n\tfunction _createPseudoHeader(tab) {\n\t\tconst trs = tab.tBodies[0].rows;\n\t\tif (trs.length === 0) return null;\n\t\n\t\tfunction containsOnlyTh(tr) {\n\t\t\tconst tds = tr.getElementsByTagName('td');\n\t\t\tconst ths = tr.getElementsByTagName('th');\n\t\t\tif (tds.length === 0 && ths.length > 0) return true;\n\t\t\treturn false;\n\t\t}\n\t\tconst trsH = [];\n\t\tfor (const tr of trs) {\n\t\t\tif (!containsOnlyTh(tr)) break;\n\t\t\ttrsH.push(tr);\n\t\t}\n\t\tif (trsH.length === 0) return null;\n\t\n\t\tconst thead = tab.createTHead();\n\t\tfor (const tr of trsH) thead.appendChild(tr);\n\t\treturn thead;\n\t}\n\t\n\tfunction _createBarClone(tab, cm) {\n\t\tconst bar = document.createElement('div');\n\t\tenableClass(true, bar, cm.styleScrollBar);\n\t\tconst spacer = document.createElement('div');\n\t\tbar.appendChild(spacer);\n\t\ttab.parentNode.appendChild(bar);\n\t\treturn bar;\n\t}\n\t\n\t\n\t// ---------------------------------------------------------------------\n\t\n\t\n\tfunction onResize(r, tab, head, bar, cm) {\n\t\ttab.style.overflowX = (tab.scrollWidth < tab.clientWidth + 2) ? 'hidden' : null;\n\t\n\t\tif (head) _updateHeaderSize(r, tab, head, cm);\n\t\tif (bar) _updateScrollBarSize(tab, bar);\n\t\tif (head || bar) onWindowScroll(tab, head, bar, cm);\n\t\tif (head) onTableScroll(tab, head, cm);\n\t}\n\t\n\tfunction _updateHeaderSize(r, tab, head, cm) {\n\t\tconst tw = r ? r.width : tab.getBoundingClientRect().width;\n\t\thead.style.maxWidth = tw + 'px';\n\t\thead.style.display  = 'none';\n\t\thead.style.top      = cm.offset + 'px';\n\t\n\t\tconst thead = tab.tHead;\n\t\tconst hw = thead.getBoundingClientRect().width;\n\t\tconst ht = head.firstChild;\n\t\tht.style.width = hw + 'px';\n\t\n\t\tconst oTrs = thead.rows;\n\t\tconst cTrs = ht.firstChild.rows;\n\t\tfor (let i = 0; i < oTrs.length; i += 1) {\n\t\t\tcopyWidth(oTrs[i], cTrs[i], 'td');\n\t\t\tcopyWidth(oTrs[i], cTrs[i], 'th');\n\t\t}\n\t\tfunction copyWidth(o, c, tag) {\n\t\t\tconst os = o.getElementsByTagName(tag);\n\t\t\tconst cs = c.getElementsByTagName(tag);\n\t\t\tfor (let i = 0; i < os.length; i += 1) {\n\t\t\t\tcs[i].style.width = os[i].getBoundingClientRect().width + 'px';\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _updateScrollBarSize(tab, bar) {\n\t\tconst disabled = (tab.scrollWidth < tab.clientWidth + 2);\n\t\tbar.style.overflowX     = disabled ? 'hidden' : null;\n\t\tbar.style.pointerEvents = disabled ? 'none'   : null;\n\t\n\t\tbar.style.maxWidth = `${tab.clientWidth}px`;\n\t\tbar.style.display = 'none';\n\t\tconst h = parseInt(getScrollBarWidth(document.documentElement));\n\t\tif (0 < h) bar.style.height = (h + 2) + 'px';\n\t\tbar.firstChild.style.width = `${tab.scrollWidth}px`;\n\t}\n\t\n\t\n\t// ---------------------------------------------------------------------\n\t\n\t\n\tfunction onWindowScroll(tab, head, bar, cm) {\n\t\tconst r = tab.getBoundingClientRect();\n\t\tconst tBottom = r.bottom;\n\t\tconst rh = tab.tHead.getBoundingClientRect();\n\t\tconst hTop = rh.top, hBottom = rh.bottom;\n\t\tconst wY0 = cm.offset, wY1 = window.innerHeight;\n\t\n\t\tconst inView = tBottom - hTop < cm.capableWindowHeightRate * (wY1 - wY0);\n\t\tconst tLeft = r.left, tScrollLeft = tab.scrollLeft;\n\t\tif (head) {\n\t\t\tconst hCy = tab.tHead.offsetHeight;\n\t\t\tconst f = (!inView && hTop < wY0 && wY0 < tBottom - hCy);\n\t\t\t_updateHeaderVisibility(head, f, tLeft, tScrollLeft);\n\t\t}\n\t\tif (bar) {\n\t\t\tconst f = (!inView && hBottom < wY1 && wY1 < tBottom);\n\t\t\t_updateBarVisibility(bar, f, tLeft, tScrollLeft);\n\t\t}\n\t}\n\t\n\tfunction _updateHeaderVisibility(head, visible, tabLeft, tabScrollLeft) {\n\t\thead.style.display = visible ? 'block' : 'none';\n\t\thead.style.left    = tabLeft + 'px';\n\t\thead.scrollLeft    = tabScrollLeft;\n\t}\n\t\n\tfunction _updateBarVisibility(bar, visible, tabLeft, tabScrollLeft) {\n\t\tbar.style.display = visible ? 'block' : 'none';\n\t\tbar.style.left    = tabLeft + 'px';\n\t\tbar.scrollLeft    = tabScrollLeft;\n\t}\n\t\n\t\n\t// ---------------------------------------------------------------------\n\t\n\t\n\tfunction onTableScroll(tab, head, cm) {\n\t\tconst sL = Math.max(0, Math.min(tab.scrollLeft, tab.scrollWidth - tab.offsetWidth));  // for iOS\n\t\thead.scrollLeft = sL;\n\t\n\t\tif (tab.scrollWidth - tab.clientWidth > 2) {  // for avoiding needless scrolling\n\t\t\tconst r = tab.scrollLeft / (tab.scrollWidth - tab.clientWidth);\n\t\t\tenableClass(r < 0.95, head, cm.styleScrollRight);\n\t\t\tenableClass(0.05 < r, head, cm.styleScrollLeft);\n\t\t} else {\n\t\t\tenableClass(false, head, cm.styleScrollRight);\n\t\t\tenableClass(false, head, cm.styleScrollLeft);\n\t\t}\n\t}\n\t\n\t\n\t// Utilities ---------------------------------------------------------------\n\t\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\tfunction getScrollBarWidth(parent) {\n\t\tconst d = document.createElement('div');\n\t\td.setAttribute('style', 'position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;');\n\t\tparent.appendChild(d);\n\t\tlet width = 0 | window.getComputedStyle(d).getPropertyValue('width');\n\t\n\t\tif (width === 0) {  // Window does not have any scroll bar\n\t\t\td.style.overflowY = 'scroll';\n\t\t\td.style.width = '';\n\t\t\tconst c = document.createElement('div');\n\t\t\tc.style.minHeight = '100px';\n\t\t\td.appendChild(c);\n\t\t\tconst cw = 0 | window.getComputedStyle(c).getPropertyValue('width');\n\t\t\twidth = d.offsetWidth - cw;\n\t\t}\n\t\tparent.removeChild(d);\n\t\treturn width;\n\t}\n\tNS.tableUsableView = initialize;\n\n\t/**\n\t *\n\t * Usable View\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-01-25\n\t *\n\t */\n\t\n\t\n\tfunction initialize(tabs, opts = {}) {\n\t\tif (tabs.length === 0) return;\n\t\tconst cm = Object.assign({\n\t\t\tcapableWindowHeightRate: 0.9,\n\t\t\tstyleHeaderContainer   : ':ncTableFixedHeaderContainer',\n\t\t\tstyleHeaderTable       : ':ncTableFixedHeaderTable',\n\t\t\tstyleScrollBar         : ':ncTableFixedScrollBar',\n\t\n\t\t\tstyleFixedHeader       : ':ncFixedHeader',\n\t\t\tstyleScrollRight       : ':ncScrollRight',\n\t\t\tstyleScrollLeft        : ':ncScrollLeft',\n\t\t\toffset                 : 0,\n\t\t}, opts);\n\t\n\t\tconst cs = [], ts = [...tabs];\n\t\tfor (const tab of ts) {\n\t\t\tconst head = _createHeaderClone(tab, cm);\n\t\t\tconst bar  = _createBarClone(tab, cm);\n\t\t\tcs.push({ tab, head, bar });\n\t\n\t\t\tlet forced = false;\n\t\t\tconst el = (tar, op) => throttle(() => {\n\t\t\t\tif (forced) {\n\t\t\t\t\tforced = false;\n\t\t\t\t} else {\n\t\t\t\t\tforced = true;\n\t\t\t\t\top.scrollLeft = tar.scrollLeft;\n\t\t\t\t\tif (head) onTableScroll(tab, head, cm);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttab.addEventListener('scroll', el(tab, bar));\n\t\t\tbar.addEventListener('scroll', el(bar, tab));\n\t\t}\n\t\tconst ro = new ResizeObserver((es) => {\n\t\t\tfor (const e of es) {\n\t\t\t\tconst idx = ts.indexOf(e.target);\n\t\t\t\tconst c = cs[idx];\n\t\t\t\tonResize(e.contentRect, c.tab, c.head, c.bar, cm);\n\t\t\t}\n\t\t});\n\t\tfor (const t of ts) ro.observe(t);\n\t\n\t\twindow.addEventListener('scroll', throttle(() => {\n\t\t\tfor (const c of cs) onWindowScroll(c.tab, c.head, c.bar, cm);\n\t\t}), { passive: true });\n\t\n\t\tconst sel = getSelector(cm.styleFixedHeader);\n\t\tif (sel) {\n\t\t\tconst elm = document.querySelector(sel);\n\t\t\tif (elm) {\n\t\t\t\tconst rob = new ResizeObserver(es => {\n\t\t\t\t\tcm.offset = es[0].contentRect.bottom;\n\t\t\t\t\tfor (const c of cs) onResize(null, c.tab, c.head, c.bar, cm);\n\t\t\t\t});\n\t\t\t\trob.observe(elm);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _createHeaderClone(tab, cm) {\n\t\tlet thead = tab.tHead;\n\t\tif (!thead) {\n\t\t\tthead = _createPseudoHeader(tab);\n\t\t\tif (!thead) return null;\n\t\t\ttab.tHead = thead;\n\t\t}\n\t\tconst hc = document.createElement('div');\n\t\tenableClass(true, hc, cm.styleHeaderContainer);\n\t\ttab.parentNode.appendChild(hc);\n\t\n\t\tconst ht = document.createElement('div');\n\t\tenableClass(true, ht, cm.styleHeaderTable);\n\t\thc.appendChild(ht);\n\t\n\t\tht.appendChild(thead.cloneNode(true));\n\t\treturn hc;\n\t}\n\t\n\tfunction _createPseudoHeader(tab) {\n\t\tconst trs = tab.tBodies[0].rows;\n\t\tif (trs.length === 0) return null;\n\t\n\t\tfunction containsOnlyTh(tr) {\n\t\t\tconst tds = tr.getElementsByTagName('td');\n\t\t\tconst ths = tr.getElementsByTagName('th');\n\t\t\tif (tds.length === 0 && ths.length > 0) return true;\n\t\t\treturn false;\n\t\t}\n\t\tconst trsH = [];\n\t\tfor (const tr of trs) {\n\t\t\tif (!containsOnlyTh(tr)) break;\n\t\t\ttrsH.push(tr);\n\t\t}\n\t\tif (trsH.length === 0) return null;\n\t\n\t\tconst thead = tab.createTHead();\n\t\tfor (const tr of trsH) thead.appendChild(tr);\n\t\treturn thead;\n\t}\n\t\n\tfunction _createBarClone(tab, cm) {\n\t\tconst bar = document.createElement('div');\n\t\tenableClass(true, bar, cm.styleScrollBar);\n\t\tconst spacer = document.createElement('div');\n\t\tbar.appendChild(spacer);\n\t\ttab.parentNode.appendChild(bar);\n\t\treturn bar;\n\t}\n\t\n\t\n\t// ---------------------------------------------------------------------\n\t\n\t\n\tfunction onResize(r, tab, head, bar, cm) {\n\t\ttab.style.overflowX = (tab.scrollWidth < tab.clientWidth + 2) ? 'hidden' : null;\n\t\n\t\tif (head) _updateHeaderSize(r, tab, head, cm);\n\t\tif (bar) _updateScrollBarSize(tab, bar);\n\t\tif (head || bar) onWindowScroll(tab, head, bar, cm);\n\t\tif (head) onTableScroll(tab, head, cm);\n\t}\n\t\n\tfunction _updateHeaderSize(r, tab, head, cm) {\n\t\tconst tw = r ? r.width : tab.getBoundingClientRect().width;\n\t\thead.style.maxWidth = tw + 'px';\n\t\thead.style.display  = 'none';\n\t\thead.style.top      = cm.offset + 'px';\n\t\n\t\tconst thead = tab.tHead;\n\t\tconst hw = thead.getBoundingClientRect().width;\n\t\tconst ht = head.firstChild;\n\t\tht.style.width = hw + 'px';\n\t\n\t\tconst oTrs = thead.rows;\n\t\tconst cTrs = ht.firstChild.rows;\n\t\tfor (let i = 0; i < oTrs.length; i += 1) {\n\t\t\tcopyWidth(oTrs[i], cTrs[i], 'td');\n\t\t\tcopyWidth(oTrs[i], cTrs[i], 'th');\n\t\t}\n\t\tfunction copyWidth(o, c, tag) {\n\t\t\tconst os = o.getElementsByTagName(tag);\n\t\t\tconst cs = c.getElementsByTagName(tag);\n\t\t\tfor (let i = 0; i < os.length; i += 1) {\n\t\t\t\tcs[i].style.width = os[i].getBoundingClientRect().width + 'px';\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _updateScrollBarSize(tab, bar) {\n\t\tconst disabled = (tab.scrollWidth < tab.clientWidth + 2);\n\t\tbar.style.overflowX     = disabled ? 'hidden' : null;\n\t\tbar.style.pointerEvents = disabled ? 'none'   : null;\n\t\n\t\tbar.style.maxWidth = `${tab.clientWidth}px`;\n\t\tbar.style.display = 'none';\n\t\tconst h = parseInt(getScrollBarWidth(document.documentElement));\n\t\tif (0 < h) bar.style.height = (h + 2) + 'px';\n\t\tbar.firstChild.style.width = `${tab.scrollWidth}px`;\n\t}\n\t\n\t\n\t// ---------------------------------------------------------------------\n\t\n\t\n\tfunction onWindowScroll(tab, head, bar, cm) {\n\t\tconst r = tab.getBoundingClientRect();\n\t\tconst tBottom = r.bottom;\n\t\tconst rh = tab.tHead.getBoundingClientRect();\n\t\tconst hTop = rh.top, hBottom = rh.bottom;\n\t\tconst wY0 = cm.offset, wY1 = window.innerHeight;\n\t\n\t\tconst inView = tBottom - hTop < cm.capableWindowHeightRate * (wY1 - wY0);\n\t\tconst tLeft = r.left, tScrollLeft = tab.scrollLeft;\n\t\tif (head) {\n\t\t\tconst hCy = tab.tHead.offsetHeight;\n\t\t\tconst f = (!inView && hTop < wY0 && wY0 < tBottom - hCy);\n\t\t\t_updateHeaderVisibility(head, f, tLeft, tScrollLeft);\n\t\t}\n\t\tif (bar) {\n\t\t\tconst f = (!inView && hBottom < wY1 && wY1 < tBottom);\n\t\t\t_updateBarVisibility(bar, f, tLeft, tScrollLeft);\n\t\t}\n\t}\n\t\n\tfunction _updateHeaderVisibility(head, visible, tabLeft, tabScrollLeft) {\n\t\thead.style.display = visible ? 'block' : 'none';\n\t\thead.style.left    = tabLeft + 'px';\n\t\thead.scrollLeft    = tabScrollLeft;\n\t}\n\t\n\tfunction _updateBarVisibility(bar, visible, tabLeft, tabScrollLeft) {\n\t\tbar.style.display = visible ? 'block' : 'none';\n\t\tbar.style.left    = tabLeft + 'px';\n\t\tbar.scrollLeft    = tabScrollLeft;\n\t}\n\t\n\t\n\t// ---------------------------------------------------------------------\n\t\n\t\n\tfunction onTableScroll(tab, head, cm) {\n\t\tconst sL = Math.max(0, Math.min(tab.scrollLeft, tab.scrollWidth - tab.offsetWidth));  // for iOS\n\t\thead.scrollLeft = sL;\n\t\n\t\tif (tab.scrollWidth - tab.clientWidth > 2) {  // for avoiding needless scrolling\n\t\t\tconst r = tab.scrollLeft / (tab.scrollWidth - tab.clientWidth);\n\t\t\tenableClass(r < 0.95, head, cm.styleScrollRight);\n\t\t\tenableClass(0.05 < r, head, cm.styleScrollLeft);\n\t\t} else {\n\t\t\tenableClass(false, head, cm.styleScrollRight);\n\t\t\tenableClass(false, head, cm.styleScrollLeft);\n\t\t}\n\t}\n\t\n\t\n\t// Utilities ---------------------------------------------------------------\n\t\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\tfunction getScrollBarWidth(parent) {\n\t\tconst d = document.createElement('div');\n\t\td.setAttribute('style', 'position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;');\n\t\tparent.appendChild(d);\n\t\tlet width = 0 | window.getComputedStyle(d).getPropertyValue('width');\n\t\n\t\tif (width === 0) {  // Window does not have any scroll bar\n\t\t\td.style.overflowY = 'scroll';\n\t\t\td.style.width = '';\n\t\t\tconst c = document.createElement('div');\n\t\t\tc.style.minHeight = '100px';\n\t\t\td.appendChild(c);\n\t\t\tconst cw = 0 | window.getComputedStyle(c).getPropertyValue('width');\n\t\t\twidth = d.offsetWidth - cw;\n\t\t}\n\t\tparent.removeChild(d);\n\t\treturn width;\n\t}\n\n})(window.NACSS);\n"]}