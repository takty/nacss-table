"use strict";window.NACSS=window.NACSS||{},window.NACSS.table=window.NACSS.table||{},(t=>{function e(t,e){const n=document.documentElement,o=n.getAttribute("data-scroll-padding-top"),l=o?new Map(o.split(",").map((t=>t.split(":")))):new Map;e?l.set(t,e):l.delete(t);const s=[...l].map((t=>t.join(":"))).join(",");s!==o&&n.setAttribute("data-scroll-padding-top",s)}function n(t=null){const e=document.documentElement.getAttribute("data-scroll-padding-top");if(!e)return 0;return e.split(",").map((t=>t.split(":"))).filter((([e])=>e!==t)).map((([t,e])=>parseInt(e))).reduce(((t,e)=>t+e),0)}function o(t,e,n=!0,o=""){const l=e.substr(1);if(e.startsWith(":"))n?t.dataset[l]=o:delete t.dataset[l];else{const e=[l,o].join("-");n?t.classList.add(e):t.classList.remove(e)}}function l(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}const s=[];function i(t,e){let n=t.tHead;if(!n){if(n=function(t){const e=t.tBodies[0].rows;if(0===e.length)return null;function n(t){const e=t.getElementsByTagName("td"),n=t.getElementsByTagName("th");return 0===e.length&&n.length>0}const o=[];for(const t of e){if(!n(t))break;o.push(t)}if(0===o.length)return null;const l=t.createTHead();for(const t of o)l.appendChild(t);return l}(t),!n)return null;t.tHead=n}const l=document.createElement("div");o(l,e.styleHeaderContainer),t.parentNode.appendChild(l);const s=document.createElement("div");return o(s,e.styleHeaderTable),l.appendChild(s),s.appendChild(n.cloneNode(!0)),l}function c(t,e){const n=document.createElement("div");o(n,e.styleScrollBar);const l=document.createElement("div");return n.appendChild(l),t.parentNode.appendChild(n),n}function d(t,e,n,o,l){e.style.overflowX=e.scrollWidth<e.clientWidth+2?"hidden":null,n&&function(t,e,n,o){const l=t?t.width:e.offsetWidth;n.style.maxWidth=l+"px",n.style.display="none",n.style.top=o.offset+"px";const s=e.tHead,i=n.firstChild;n.style.setProperty("--nc-width",`${s.offsetWidth}px`),n.style.setProperty("--nc-height",`${s.offsetHeight}px`);const c=s.rows,d=i.firstChild.rows;for(let t=0;t<c.length;t+=1)r(c[t],d[t],"td"),r(c[t],d[t],"th");function r(t,e,n){const o=t.getElementsByTagName(n),l=e.getElementsByTagName(n);for(let t=0;t<o.length;t+=1)l[t].style.width=o[t].offsetWidth+"px"}}(t,e,n,l),o&&function(t,e){const n=t.scrollWidth<t.clientWidth+2;e.style.overflowX=n?"hidden":null,e.style.pointerEvents=n?"none":null,e.style.maxWidth=`${t.clientWidth}px`,e.style.display="none";const o=parseInt(function(t){const e=document.createElement("div");e.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),t.appendChild(e);let n=0|window.getComputedStyle(e).getPropertyValue("width");if(0===n){e.style.overflowY="scroll",e.style.width="";const t=document.createElement("div");t.style.minHeight="100px",e.appendChild(t);const o=0|window.getComputedStyle(t).getPropertyValue("width");n=e.offsetWidth-o}return t.removeChild(e),n}(document.documentElement));0<o&&(e.style.height=o+2+"px");e.firstChild.style.width=`${t.scrollWidth}px`}(e,o),(n||o)&&r(e,n,o,l),n&&a(e,n,l)}function r(t,n,o,l){const s=t.getBoundingClientRect(),i=s.bottom,c=(t.tHead??t.tBodies[0]).getBoundingClientRect(),d=c.top,r=c.bottom,a=l.offset,f=window.innerHeight,u=i-d<l.capableWindowHeightRate*(f-a),p=s.left,h=t.scrollLeft;if(n){const o=t.tHead.offsetHeight;!function(t,n,o,l){t.style.display=n?"block":"none",t.style.left=o+"px",t.scrollLeft=l;const s=t.offsetHeight;e("nacss-table",s)}(n,!u&&d<a&&a<i-o,p,h)}if(o){!function(t,e,n,o){t.style.display=e?"block":"none",t.style.left=n+"px",t.scrollLeft=o}(o,!u&&r<f&&f<i,p,h)}}function a(t,e,n){const l=Math.max(0,Math.min(t.scrollLeft,t.scrollWidth-t.offsetWidth));if(e.scrollLeft=l,t.scrollWidth-t.clientWidth>2){const l=t.scrollLeft/(t.scrollWidth-t.clientWidth);o(e,n.styleScrollRight,l<.95),o(e,n.styleScrollLeft,.05<l)}else o(e,n.styleScrollRight,!1),o(e,n.styleScrollLeft,!1)}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of s)t()}),{passive:!0})})),t.applyUsableView=function(t,o={}){if(0===t.length)return;const f=Object.assign({capableWindowHeightRate:.9,styleHeaderContainer:":ncTableStickyHeaderContainer",styleHeaderTable:":ncTableStickyHeaderTable",styleScrollBar:":ncTableStickyScrollBar",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft",offset:0},o),u=[],p=[...t];for(const t of p){const e=i(t,f),n=c(t,f);u.push({tab:t,head:e,bar:n});let o=null;const s=(n,s)=>l((()=>{o&&o!==n?o=null:(o=n,s.scrollLeft=n.scrollLeft,e&&a(t,e,f))}));t.addEventListener("scroll",s(t,n)),n.addEventListener("scroll",s(n,t))}const h=new ResizeObserver((t=>{for(const e of t){const t=p.indexOf(e.target),n=u[t];d(e.contentRect,n.tab,n.head,n.bar,f)}}));for(const t of p)h.observe(t);window.addEventListener("scroll",l((()=>{for(const t of u)r(t.tab,t.head,t.bar,f)})),{passive:!0}),function(){const t=document.documentElement;if(null!==t.getAttribute("data-scroll-padding-top"))return;t.setAttribute("data-scroll-padding-top","");const o=new MutationObserver(((t,e)=>l(e)));function l(t){const o=document.documentElement;t.disconnect(),o.style.scrollPaddingTop=null;const l=parseInt(getComputedStyle(o).scrollPaddingTop);e("default",Number.isNaN(l)?0:l),o.style.scrollPaddingTop=n()+"px",t.observe(o,{attributes:!0})}o.observe(t,{attributes:!0}),l(o)}();let m=null;const y=()=>{f.offset=n("nacss-table"),m&&clearTimeout(m),m=setTimeout((()=>{for(const t of u)d(null,t.tab,t.head,t.bar,f)}),100)};!function(t,e=!1){e&&t(),s.push(l(t))}(y,!0),new MutationObserver(y).observe(document.documentElement,{attributes:!0})}})(window.NACSS.table);
//# sourceMappingURL=table-usable-view.min.js.map