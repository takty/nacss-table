"use strict";window.NACSS=window.NACSS||{},window.NACSS.table=window.NACSS.table||{},(t=>{function e(){const t=document.documentElement,e=t.getAttribute("data-scroll-padding-top");if(""===e)t.style.scrollPaddingTop=null;else{const n=e.split(",").map((t=>t.split(":")[1]));t.style.scrollPaddingTop=`calc(${n.join(" + ")})`}}function n(t,e,n=!0,l=""){const o=e.substr(1);if(e.startsWith(":"))n?t.dataset[o]=l:delete t.dataset[o];else{const e=[o,l].join("-");n?t.classList.add(e):t.classList.remove(e)}}function l(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}const o=[];function i(t,e){let l=t.tHead;if(!l){if(l=function(t){const e=t.tBodies[0].rows;if(0===e.length)return null;function n(t){const e=t.getElementsByTagName("td"),n=t.getElementsByTagName("th");return 0===e.length&&n.length>0}const l=[];for(const t of e){if(!n(t))break;l.push(t)}if(0===l.length)return null;const o=t.createTHead();for(const t of l)o.appendChild(t);return o}(t),!l)return null;t.tHead=l}const o=document.createElement("div");n(o,e.styleHeaderContainer),t.parentNode.appendChild(o);const i=document.createElement("div");return n(i,e.styleHeaderTable),o.appendChild(i),i.appendChild(l.cloneNode(!0)),o}function s(t,e){const l=document.createElement("div");n(l,e.styleScrollBar);const o=document.createElement("div");return l.appendChild(o),t.parentNode.appendChild(l),l}function d(t,e,n,l,o){e.style.overflowX=e.scrollWidth<e.clientWidth+2?"hidden":null,n&&function(t,e,n,l){const o=t?t.width:e.getBoundingClientRect().width;n.style.maxWidth=o+"px",n.style.display="none",n.style.top=l.offset+"px";const i=e.tHead,s=i.getBoundingClientRect().width,d=n.firstChild;d.style.width=s+"px";const c=i.rows,r=d.firstChild.rows;for(let t=0;t<c.length;t+=1)a(c[t],r[t],"td"),a(c[t],r[t],"th");function a(t,e,n){const l=t.getElementsByTagName(n),o=e.getElementsByTagName(n);for(let t=0;t<l.length;t+=1)o[t].style.width=l[t].getBoundingClientRect().width+"px"}}(t,e,n,o),l&&function(t,e){const n=t.scrollWidth<t.clientWidth+2;e.style.overflowX=n?"hidden":null,e.style.pointerEvents=n?"none":null,e.style.maxWidth=`${t.clientWidth}px`,e.style.display="none";const l=parseInt(function(t){const e=document.createElement("div");e.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),t.appendChild(e);let n=0|window.getComputedStyle(e).getPropertyValue("width");if(0===n){e.style.overflowY="scroll",e.style.width="";const t=document.createElement("div");t.style.minHeight="100px",e.appendChild(t);const l=0|window.getComputedStyle(t).getPropertyValue("width");n=e.offsetWidth-l}return t.removeChild(e),n}(document.documentElement));0<l&&(e.style.height=l+2+"px");e.firstChild.style.width=`${t.scrollWidth}px`}(e,l),(n||l)&&c(e,n,l,o),n&&r(e,n,o)}function c(t,n,l,o){const i=t.getBoundingClientRect(),s=i.bottom,d=(t.tHead??t.tBodies[0]).getBoundingClientRect(),c=d.top,r=d.bottom,a=o.offset,f=window.innerHeight,u=s-c<o.capableWindowHeightRate*(f-a),p=i.left,h=t.scrollLeft;if(n){const l=t.tHead.offsetHeight;!function(t,n,l,o){t.style.display=n?"block":"none",t.style.left=l+"px",t.scrollLeft=o;!function(t,n){const l=document.documentElement,o=l.getAttribute("data-scroll-padding-top"),i=o?new Map(o.split(",").map((t=>t.split(":")))):new Map;n?i.set(t,n):i.delete(t),l.setAttribute("data-scroll-padding-top",Array.from(i).map((t=>t.join(":"))).join(",")),e()}("nacss-table",`${t.getBoundingClientRect().height}px`)}(n,!u&&c<a&&a<s-l,p,h)}if(l){!function(t,e,n,l){t.style.display=e?"block":"none",t.style.left=n+"px",t.scrollLeft=l}(l,!u&&r<f&&f<s,p,h)}}function r(t,e,l){const o=Math.max(0,Math.min(t.scrollLeft,t.scrollWidth-t.offsetWidth));if(e.scrollLeft=o,t.scrollWidth-t.clientWidth>2){const o=t.scrollLeft/(t.scrollWidth-t.clientWidth);n(e,l.styleScrollRight,o<.95),n(e,l.styleScrollLeft,.05<o)}else n(e,l.styleScrollRight,!1),n(e,l.styleScrollLeft,!1)}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of o)t()}),{passive:!0})})),t.applyUsableView=function(t,n={}){if(0===t.length)return;const a=Object.assign({capableWindowHeightRate:.9,styleHeaderContainer:":ncTableStickyHeaderContainer",styleHeaderTable:":ncTableStickyHeaderTable",styleScrollBar:":ncTableStickyScrollBar",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft",offset:0},n),f=[],u=[...t];for(const t of u){const e=i(t,a),n=s(t,a);f.push({tab:t,head:e,bar:n});let o=!1;const d=(n,i)=>l((()=>{o?o=!1:(o=!0,i.scrollLeft=n.scrollLeft,e&&r(t,e,a))}));t.addEventListener("scroll",d(t,n)),n.addEventListener("scroll",d(n,t))}const p=new ResizeObserver((t=>{for(const e of t){const t=u.indexOf(e.target),n=f[t];d(e.contentRect,n.tab,n.head,n.bar,a)}}));for(const t of u)p.observe(t);window.addEventListener("scroll",l((()=>{for(const t of f)c(t.tab,t.head,t.bar,a)})),{passive:!0});let h=null;!function(t,e=!1){e&&t(),o.push(l(t))}((()=>{a.offset=function(){const t=getComputedStyle(document.documentElement),e=parseInt(t.scrollPaddingTop);return Number.isNaN(e)?0:e}(),h&&clearTimeout(h),h=setTimeout((()=>{for(const t of f)d(null,t.tab,t.head,t.bar,a)}),100)}),!0),function(){const t=document.documentElement;if(null!==t.getAttribute("data-scroll-padding-top"))return;t.setAttribute("data-scroll-padding-top",""),new MutationObserver(e).observe(t,{attributes:!0})}()}})(window.NACSS.table);
//# sourceMappingURL=table-usable-view.min.js.map