"use strict";window.NACSS=window.NACSS||{},window.NACSS.table=window.NACSS.table||{},(t=>{function e(t,e,n=!0,o=""){const l=e.substr(1);if(e.startsWith(":"))n?t.dataset[l]=o:delete t.dataset[l];else{const e=[l,o].join("-");n?t.classList.add(e):t.classList.remove(e)}}function n(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}const o=[];document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of o)t()}),{passive:!0})}));{function r(t,n={}){if(0===t.length)return;const o=t[t.length-1],l=Object.assign({fullWidthRate:.95,cellMinWidth:80,cellMinAspect:2/3,cellMinLength:8,maxRowSize:200,maxBorderWidth:2,before:null,after:null,styleNeat:":ncTableNeat",styleFull:":ncTableFull",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft"},n,c(o));l.padH+=2*l.maxBorderWidth,l.padV+=2*l.maxBorderWidth,l.dcTd=d(o,"td"),l.dcTh=d(o,"th");const i=[],s=[];for(const e of t)u(e,l)?i.push(e):s.push(e);l.gcCount=i.length;for(const t of i){const n=!!l.before&&(l.before(t)??0);r=()=>{m(t,l),e(t,l.styleNeat),l.after&&l.after(t),0==--l.gcCount&&f(o,l)},!1===(a=n)?r():setTimeout(r,a)}var r,a;if(l.fullWidthRate)for(const t of s){t.parentElement.clientWidth*l.fullWidthRate<t.clientWidth&&e(t,l.styleFull)}h(i,l)}function c(t){const e=t.getElementsByTagName("td")[0],n=getComputedStyle(e),o=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),l=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),[i,s]=a(e);return{padH:o,padV:l,charW:i,lineH:s}}function a(t){const e=document.createElement(t.nodeName);e.setAttribute("style",`position:fixed;margin:0;padding:0;font-family:${t.style.fontFamily||"inherit"};font-size:${t.style.fontSize||"inherit"};`),e.innerHTML="ã€€",t.parentNode.appendChild(e);const n=e.clientWidth,o=e.clientHeight;return e.parentNode.removeChild(e),[n,o]}function d(t,e){const n=document.createElement(e);return n.setAttribute("style","position:fixed;display:inline-block;visibility:hidden;white-space:nowrap;"),t.appendChild(n)}function f(t,e){t.removeChild(e.dcTd),t.removeChild(e.dcTh)}function u(t,e){if(0===t.rows.length)return!1;if(e.maxRowSize<t.rows.length)return!1;const{cellMinWidth:n,cellMinAspect:o}=e;for(const e of t.rows)if(e.hasChildNodes())for(const t of e.childNodes){const e=t.tagName;if("TD"!==e&&"TH"!==e)continue;if(1<parseInt(t.getAttribute("colSpan"),10))continue;if(1<parseInt(t.getAttribute("rowSpan"),10))continue;const l=t.clientWidth,i=t.clientHeight;if(l<n||l/i<o)return!0}return!1}function h(t,e){const o=new ResizeObserver((t=>{for(const n of t)p(n.target),g(n.target,e)}));for(const l of t)o.observe(l),l.addEventListener("scroll",n((()=>{g(l,e)})))}function p(t){const e=t.clientHeight,n=t.caption?.clientHeight??0;t.style.setProperty("--nc-height",e-n+"px")}function g(t,n){if(t.scrollWidth-t.clientWidth>2){const o=t.scrollLeft/(t.scrollWidth-t.clientWidth);e(t,n.styleScrollRight,o<.95),e(t,n.styleScrollLeft,.05<o)}else e(t,n.styleScrollRight,!1),e(t,n.styleScrollLeft,!1)}function m(t,e){t.removeAttribute("width"),t.style.width&&(t.style.width=null),t.style.height&&(t.style.height=null);const n=y(t);C(n,W(n,Object.assign(w(t,n),e)));const o=t.getElementsByTagName("caption");o.length&&(o[0].innerHTML=`<span>${o[0].innerHTML}</span>`)}function y(t){const e=b(t);let n=0;for(const t of e)n=Math.max(n,t.length);const o=[];for(const t of e)o.push(new Array(n));for(let t=0;t<o.length;t+=1){const l=o[t],i=e[t];let s=0;for(let e=0;e<n;e+=1){if("number"==typeof l[e]||null===l[e])continue;const n=i[s],r=parseInt(n.getAttribute("colSpan")??1,10),c=parseInt(n.getAttribute("rowSpan")??1,10);if(l[e]=n,1<r)for(let t=1;t<r;t+=1)l[e+t]=t;if(1<c)for(let n=1;n<c;n+=1){const l=o[t+n];for(let t=0;t<r;t+=1)l[e+t]=null}if(s+=1,i.length<=s)break}}return o}function b(t,e=[]){for(const n of t.rows){const t=[];if(n.hasChildNodes())for(const e of n.childNodes){const n=e.tagName;"TD"!==n&&"TH"!==n||t.push(e)}e.push(t)}return e}function w(t,e){const n=t.clientWidth,o=[];for(let t=0;t<e[0].length;t+=1)for(let n=0;n<e.length;n+=1){const l=e[n][t];if(l instanceof HTMLTableCellElement&&!l.getAttribute("colSpan")){o.push(l.clientWidth);break}}return{origTabW:n,origCellWs:o}}function W(t,e){for(const e of t)for(const t of e)"number"!=typeof t&&null!==t&&(t.style.whiteSpace="nowrap");const n=t[0].length,o=new Array(n).fill(0),l=new Array(n).fill(0);for(const i of t)for(let t=0;t<n;t+=1){const s=i[t];if(null==s||"number"==typeof s)continue;if(t<n-1&&"number"==typeof i[t+1])continue;if(1<parseInt(s.getAttribute("colSpan"),10))continue;if(1<parseInt(s.getAttribute("rowSpan"),10))continue;const r=S(s,e);o[t]=Math.max(o[t],r),r||(l[t]=Math.max(l[t],s.clientWidth))}return H(o,l,e),o}function S(t,e){const{padH:n,padV:o,charW:l,lineH:i,dcTd:s,dcTh:r,cellMinWidth:c,cellMinAspect:a,cellMinLength:d}=e;if(T(t)<d)return 0;t.innerHTML=t.innerHTML.trim();const f="TD"===t.tagName?s:r;f.innerHTML=t.innerHTML;const u=f.clientWidth-n,h=Math.round((f.clientHeight-o)/i);let p=0;for(let t=2;;t+=1){const e=0|u/t+l*t+n;if(e<c||e/(h*(t*i)+o)<a||p&&p<e)break;p=e}return p+l<f.clientWidth?p:0}function T(t){const e=t.innerHTML.trim().split(/<\s*br\s*\/?>/iu).map((t=>t.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"").length));return Math.max(...e)}function H(t,e,n){const{origTabW:o,origCellWs:l}=n;let i=0,s=0;for(let n=0;n<t.length;n+=1)t[n]?i+=t[n]:s+=e[n];if(o<i+s)return;let r=o-s;for(let e=0;e<t.length;e+=1){if(!t[e])continue;const n=t[e],o=Math.min(n/i*r,l[e]);r-=o-n,i-=o-n,t[e]=0|o}}function C(t,e){for(const n of t)for(let t=0;t<n.length;t+=1){const o=n[t],l=e[t];l&&o instanceof HTMLTableCellElement&&(o.style.whiteSpace=null,o.style.minWidth=l+"px",o.style.width=null)}}t.applyNeatWidth=r}{function L(t,e={}){if(0===t.length)return;const r=Object.assign({capableWindowHeightRate:.9,styleHeaderContainer:":ncTableStickyHeaderContainer",styleHeaderTable:":ncTableStickyHeaderTable",styleScrollBar:":ncTableStickyScrollBar",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft",offset:0},e),c=[],a=[...t];for(const t of a){const e=v(t,r),o=x(t,r);c.push({tab:t,head:e,bar:o});let l=null;const i=(o,i)=>n((()=>{l&&l!==o?l=null:(l=o,i.scrollLeft=o.scrollLeft,e&&F(t,e,r))}));t.addEventListener("scroll",i(t,o)),o.addEventListener("scroll",i(o,t))}const d=new ResizeObserver((t=>{for(const e of t){const t=a.indexOf(e.target),n=c[t];M(e.contentRect,n.tab,n.head,n.bar,r)}}));for(const t of a)d.observe(t);window.addEventListener("scroll",n((()=>{for(const t of c)R(t.tab,t.head,t.bar,r)})),{passive:!0}),function(){const t=document.documentElement;if(null!==t.getAttribute("data-scroll-padding-top"))return;t.setAttribute("data-scroll-padding-top","");new MutationObserver(s).observe(t,{attributes:!0});const e=parseInt(getComputedStyle(t).scrollPaddingTop);l("default",Number.isNaN(e)?0:e)}();let f=null;!function(t,e=!1){e&&t(),o.push(n(t))}((()=>{r.offset=i("nacss-table"),f&&clearTimeout(f),f=setTimeout((()=>{for(const t of c)M(null,t.tab,t.head,t.bar,r)}),100)}),!0)}function v(t,n){let o=t.tHead;if(!o){if(o=N(t),!o)return null;t.tHead=o}const l=document.createElement("div");e(l,n.styleHeaderContainer),t.parentNode.appendChild(l);const i=document.createElement("div");return e(i,n.styleHeaderTable),l.appendChild(i),i.appendChild(o.cloneNode(!0)),l}function N(t){const e=t.tBodies[0].rows;if(0===e.length)return null;function n(t){const e=t.getElementsByTagName("td"),n=t.getElementsByTagName("th");return 0===e.length&&n.length>0}const o=[];for(const t of e){if(!n(t))break;o.push(t)}if(0===o.length)return null;const l=t.createTHead();for(const t of o)l.appendChild(t);return l}function x(t,n){const o=document.createElement("div");e(o,n.styleScrollBar);const l=document.createElement("div");return o.appendChild(l),t.parentNode.appendChild(o),o}function M(t,e,n,o,l){e.style.overflowX=e.scrollWidth<e.clientWidth+2?"hidden":null,n&&E(t,e,n,l),o&&A(e,o),(n||o)&&R(e,n,o,l),n&&F(e,n,l)}function E(t,e,n,o){const l=t?t.width:e.offsetWidth;n.style.maxWidth=l+"px",n.style.display="none",n.style.top=o.offset+"px";const i=e.tHead,s=n.firstChild;n.style.setProperty("--nc-width",`${i.offsetWidth}px`),n.style.setProperty("--nc-height",`${i.offsetHeight}px`);const r=i.rows,c=s.firstChild.rows;for(let t=0;t<r.length;t+=1)a(r[t],c[t],"td"),a(r[t],c[t],"th");function a(t,e,n){const o=t.getElementsByTagName(n),l=e.getElementsByTagName(n);for(let t=0;t<o.length;t+=1)l[t].style.width=o[t].offsetWidth+"px"}}function A(t,e){const n=t.scrollWidth<t.clientWidth+2;e.style.overflowX=n?"hidden":null,e.style.pointerEvents=n?"none":null,e.style.maxWidth=`${t.clientWidth}px`,e.style.display="none";const o=parseInt(I(document.documentElement));0<o&&(e.style.height=o+2+"px"),e.firstChild.style.width=`${t.scrollWidth}px`}function R(t,e,n,o){const l=t.getBoundingClientRect(),i=l.bottom,s=(t.tHead??t.tBodies[0]).getBoundingClientRect(),r=s.top,c=s.bottom,a=o.offset,d=window.innerHeight,f=i-r<o.capableWindowHeightRate*(d-a),u=l.left,h=t.scrollLeft;if(e){const n=t.tHead.offsetHeight;B(e,!f&&r<a&&a<i-n,u,h)}if(n){k(n,!f&&c<d&&d<i,u,h)}}function B(t,e,n,o){t.style.display=e?"block":"none",t.style.left=n+"px",t.scrollLeft=o;l("nacss-table",t.offsetHeight)}function k(t,e,n,o){t.style.display=e?"block":"none",t.style.left=n+"px",t.scrollLeft=o}function F(t,n,o){const l=Math.max(0,Math.min(t.scrollLeft,t.scrollWidth-t.offsetWidth));if(n.scrollLeft=l,t.scrollWidth-t.clientWidth>2){const l=t.scrollLeft/(t.scrollWidth-t.clientWidth);e(n,o.styleScrollRight,l<.95),e(n,o.styleScrollLeft,.05<l)}else e(n,o.styleScrollRight,!1),e(n,o.styleScrollLeft,!1)}function I(t){const e=document.createElement("div");e.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),t.appendChild(e);let n=0|window.getComputedStyle(e).getPropertyValue("width");if(0===n){e.style.overflowY="scroll",e.style.width="";const t=document.createElement("div");t.style.minHeight="100px",e.appendChild(t);const o=0|window.getComputedStyle(t).getPropertyValue("width");n=e.offsetWidth-o}return t.removeChild(e),n}t.applyUsableView=L}function l(t,e){const n=document.documentElement,o=n.getAttribute("data-scroll-padding-top"),l=o?new Map(o.split(",").map((t=>t.split(":")))):new Map;e?l.set(t,e):l.delete(t),n.setAttribute("data-scroll-padding-top",[...l].map((t=>t.join(":"))).join(",")),s()}function i(t=null){const e=document.documentElement.getAttribute("data-scroll-padding-top");if(!e)return 0;return e.split(",").map((t=>t.split(":"))).filter((([e])=>e!==t)).map((([t,e])=>parseInt(e))).reduce(((t,e)=>t+e),0)}function s(){document.documentElement.style.scrollPaddingTop=i()+"px"}})(window.NACSS.table);
//# sourceMappingURL=table.min.js.map