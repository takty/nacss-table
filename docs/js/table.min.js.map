{"version":3,"sources":["table.js"],"names":["window","NS","setClass","tar","cls","enabled","val","key","substr","startsWith","dataset","c","join","classList","add","remove","throttle","fn","isRunning","args","requestAnimationFrame","resizeListeners","document","addEventListener","l","passive","apply","tabs","opts","length","lt","cm","Object","assign","fullWidthRate","cellMinWidth","cellMinAspect","cellMinLength","maxRowSize","maxBorderWidth","before","after","styleNeat","styleFull","styleScrollRight","styleScrollLeft","getCommonMetrics","padH","padV","dcTd","makeDummyCell","dcTh","tarTabs","noTarTabs","t","isTarget","push","gcCount","delay","adjustWidth","removeDummyCell","d","setTimeout","parentElement","clientWidth","initScroll","tab","td","getElementsByTagName","s","getComputedStyle","parseFloat","paddingLeft","paddingRight","paddingTop","paddingBottom","charW","lineH","getTextSize","elm","createElement","nodeName","setAttribute","style","fontFamily","fontSize","innerHTML","parentNode","appendChild","w","h","clientHeight","removeChild","tagName","cMat","cMet","rows","tr","hasChildNodes","n","childNodes","tn","parseInt","getAttribute","cw","ch","rob","ResizeObserver","oes","oe","onResize","target","onScroll","observe","th","caption","setProperty","scrollWidth","r","scrollLeft","removeAttribute","width","height","grid","makeCellGrid","setCellWidth","calcNewWidths","getMetrics","cs","css","collectCells","maxWidth","Math","max","g","Array","y","gr","tds","i","x","col","row","p","q","nr","origTabW","origCellWs","HTMLTableCellElement","met","gc","whiteSpace","gw","newWs","fill","fixWs","minW","calcMinWidth","widenTabWidth","calcMaxLineLength","trim","dc","aw","ls","round","tempW","ts","split","map","e","replace","wNew","wFix","rem","nw","min","ws","minWidth","applyNeatWidth","capableWindowHeightRate","styleHeaderContainer","styleHeaderTable","styleScrollBar","offset","head","_createHeaderClone","bar","_createBarClone","forced","el","self","op","onTableScroll","ro","es","idx","indexOf","doResize","contentRect","maxHeadH","onWindowScroll","offsetHeight","setScrollPaddingTop","de","documentElement","mo","MutationObserver","ms","update","disconnect","scrollPaddingTop","v","Number","isNaN","getScrollPaddingTop","attributes","initializeScrollPaddingTop","st","clearTimeout","doFirst","thead","tHead","_createPseudoHeader","hc","ht","cloneNode","trs","tBodies","containsOnlyTh","ths","trsH","createTHead","spacer","overflowX","_updateHeaderSize","_updateScrollBarSize","tw","offsetWidth","display","top","firstChild","oTrs","cTrs","copyWidth","o","tag","os","disabled","pointerEvents","getScrollBarWidth","getBoundingClientRect","tBottom","bottom","rh","hTop","hBottom","wY0","wY1","innerHeight","inView","tLeft","left","tScrollLeft","hCy","_updateHeaderVisibility","_updateBarVisibility","visible","tabLeft","tabScrollLeft","sL","parent","getPropertyValue","overflowY","minHeight","applyUsableView","at","vs","Map","set","delete","newAt","without","filter","k","reduce","a","b"],"mappings":"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","file":"table.min.js","sourcesContent":["/**\n * Table\n *\n * @author Takuto Yanagida\n * @version 2022-01-06\n */\n\n'use strict';\n\nwindow['NACSS']          = window['NACSS']          || {};\nwindow['NACSS']['table'] = window['NACSS']['table'] || {};\n\n((NS) => {\n\n\t/**\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t */\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t * Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-12-06\n\t */\n\t\n\tfunction getScrollOffset() {\n\t\tconst s   = getComputedStyle(document.documentElement);\n\t\tconst val = parseInt(s.scrollPaddingTop);\n\t\treturn Number.isNaN(val) ? 0 : val;\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\treturn (...args) => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn(...args);\n\t\t\t});\n\t\t};\n\t}\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tfor (const l of resizeListeners) l();\n\t\t}, { passive: true });\n\t});\n\t\n\t{\n\t\t/**\n\t\t * Neat Width\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2023-01-17\n\t\t */\n\t\t\n\t\tfunction apply(tabs, opts = {}) {\n\t\t\tif (tabs.length === 0) return;\n\t\t\n\t\t\tconst lt = tabs[tabs.length - 1];\n\t\t\tconst cm = Object.assign({\n\t\t\t\tfullWidthRate   : 0.95,\n\t\t\t\tcellMinWidth    : 80,\n\t\t\t\tcellMinAspect   : 2 / 3,  // width / height\n\t\t\t\tcellMinLength   : 8,\n\t\t\t\tmaxRowSize      : 200,\n\t\t\t\tmaxBorderWidth  : 2,\n\t\t\t\tbefore          : null,  // function (table) { ...; return delay; }\n\t\t\t\tafter           : null,  // function (table) { ... }\n\t\t\t\tstyleNeat       : ':ncTableNeat',\n\t\t\t\tstyleFull       : ':ncTableFull',\n\t\t\t\tstyleScrollRight: ':ncScrollRight',\n\t\t\t\tstyleScrollLeft : ':ncScrollLeft',\n\t\t\t}, opts, getCommonMetrics(lt));\n\t\t\n\t\t\tcm.padH += cm.maxBorderWidth * 2;\n\t\t\tcm.padV += cm.maxBorderWidth * 2;\n\t\t\tcm.dcTd = makeDummyCell(lt, 'td');\n\t\t\tcm.dcTh = makeDummyCell(lt, 'th');\n\t\t\n\t\t\tconst tarTabs = [], noTarTabs = [];\n\t\t\tfor (const t of tabs) {\n\t\t\t\tif (isTarget(t, cm)) tarTabs.push(t);\n\t\t\t\telse noTarTabs.push(t);\n\t\t\t}\n\t\t\tcm.gcCount = tarTabs.length;\n\t\t\n\t\t\tfor (const t of tarTabs) {\n\t\t\t\tconst delay = (cm.before) ? (cm.before(t) ?? 0) : false;\n\t\t\t\tst(() => {\n\t\t\t\t\tadjustWidth(t, cm);\n\t\t\t\t\tsetClass(t, cm.styleNeat);\n\t\t\t\t\tif (cm.after) cm.after(t);\n\t\t\t\t\tif (--cm.gcCount === 0) removeDummyCell(lt, cm);\n\t\t\t\t}, delay);\n\t\t\t}\n\t\t\tif (cm.fullWidthRate) {\n\t\t\t\tfor (const t of noTarTabs) {\n\t\t\t\t\tconst pw = t.parentElement.clientWidth;\n\t\t\t\t\tif (pw * cm.fullWidthRate < t.clientWidth) setClass(t, cm.styleFull);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction st(fn, d) { (d === false) ? fn() : setTimeout(fn, d); }\n\t\t\tinitScroll(tarTabs, cm);\n\t\t}\n\t\t\n\t\tfunction getCommonMetrics(tab) {\n\t\t\tconst td = tab.getElementsByTagName('td')[0];\n\t\t\tconst s = getComputedStyle(td);\n\t\t\tconst padH  = parseFloat(s.paddingLeft) + parseFloat(s.paddingRight);\n\t\t\tconst padV  = parseFloat(s.paddingTop) + parseFloat(s.paddingBottom);\n\t\t\tconst [charW, lineH] = getTextSize(td);\n\t\t\treturn { padH, padV, charW, lineH };\n\t\t}\n\t\t\n\t\tfunction getTextSize(elm) {\n\t\t\tconst d = document.createElement(elm.nodeName);\n\t\t\td.setAttribute('style', `position:fixed;margin:0;padding:0;font-family:${elm.style.fontFamily || 'inherit'};font-size:${elm.style.fontSize || 'inherit'};`);\n\t\t\td.innerHTML = '\\u3000';  // Full width space\n\t\t\telm.parentNode.appendChild(d);\n\t\t\tconst w = d.clientWidth;\n\t\t\tconst h = d.clientHeight;\n\t\t\td.parentNode.removeChild(d);\n\t\t\treturn [w, h];\n\t\t}\n\t\t\n\t\tfunction makeDummyCell(t, tagName) {\n\t\t\tconst d = document.createElement(tagName);\n\t\t\td.setAttribute('style', `position:fixed;display:inline-block;visibility:hidden;white-space:nowrap;`);\n\t\t\treturn t.appendChild(d);\n\t\t}\n\t\t\n\t\tfunction removeDummyCell(lt, cMat) {\n\t\t\tlt.removeChild(cMat.dcTd);\n\t\t\tlt.removeChild(cMat.dcTh);\n\t\t}\n\t\t\n\t\tfunction isTarget(tab, cMet) {\n\t\t\tif (tab.rows.length === 0) return false;\n\t\t\tif (cMet.maxRowSize < tab.rows.length) return false;\n\t\t\n\t\t\tconst { cellMinWidth, cellMinAspect } = cMet;\n\t\t\tfor (const tr of tab.rows) {\n\t\t\t\tif (!tr.hasChildNodes()) continue;\n\t\t\t\tfor (const n of tr.childNodes) {\n\t\t\t\t\tconst tn = n.tagName;\n\t\t\t\t\tif (tn !== 'TD' && tn !== 'TH') continue;\n\t\t\t\t\tif (1 < parseInt(n.getAttribute('colSpan'), 10)) continue;\n\t\t\t\t\tif (1 < parseInt(n.getAttribute('rowSpan'), 10)) continue;\n\t\t\t\t\tconst cw = n.clientWidth;\n\t\t\t\t\tconst ch = n.clientHeight;\n\t\t\t\t\tif (cw < cellMinWidth || cw / ch < cellMinAspect) return true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction initScroll(tabs, cMet) {\n\t\t\tconst rob = new ResizeObserver(oes => {\n\t\t\t\tfor (const oe of oes) {\n\t\t\t\t\tonResize(oe.target);\n\t\t\t\t\tonScroll(oe.target, cMet);\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (const t of tabs) {\n\t\t\t\trob.observe(t);\n\t\t\t\tt.addEventListener('scroll', throttle(() => { onScroll(t, cMet); }));\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onResize(tab) {\n\t\t\tconst th = tab.clientHeight;\n\t\t\tconst ch = tab.caption?.clientHeight ?? 0;\n\t\t\ttab.style.setProperty('--nc-height', `${th - ch}px`)\n\t\t}\n\t\t\n\t\tfunction onScroll(tab, cMet) {\n\t\t\tif (tab.scrollWidth - tab.clientWidth > 2) {  // for avoiding needless scrolling\n\t\t\t\tconst r = tab.scrollLeft / (tab.scrollWidth - tab.clientWidth);\n\t\t\t\tsetClass(tab, cMet.styleScrollRight, r < 0.95);\n\t\t\t\tsetClass(tab, cMet.styleScrollLeft, 0.05 < r);\n\t\t\t} else {\n\t\t\t\tsetClass(tab, cMet.styleScrollRight, false);\n\t\t\t\tsetClass(tab, cMet.styleScrollLeft, false);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction adjustWidth(tab, cMet) {\n\t\t\ttab.removeAttribute('width');\n\t\t\tif (tab.style.width) tab.style.width = null;\n\t\t\tif (tab.style.height) tab.style.height = null;\n\t\t\n\t\t\tconst grid  = makeCellGrid(tab);\n\t\t\tconst met   = Object.assign(getMetrics(tab, grid), cMet);\n\t\t\tconst newWs = calcNewWidths(grid, met);\n\t\t\tsetCellWidth(grid, newWs);\n\t\t\n\t\t\tconst cs = tab.getElementsByTagName('caption');\n\t\t\tif (cs.length) cs[0].innerHTML = `<span>${cs[0].innerHTML}</span>`;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction makeCellGrid(t) {\n\t\t\tconst css = collectCells(t);\n\t\t\tlet maxWidth = 0;\n\t\t\tfor (const cs of css) maxWidth = Math.max(maxWidth, cs.length);\n\t\t\tconst g = [];\n\t\t\tfor (const cs of css) g.push(new Array(maxWidth));\n\t\t\n\t\t\tfor (let y = 0; y < g.length; y += 1) {\n\t\t\t\tconst gr = g[y];\n\t\t\t\tconst tds = css[y];\n\t\t\t\tlet i = 0;\n\t\t\n\t\t\t\tfor (let x = 0; x < maxWidth; x += 1) {\n\t\t\t\t\tif (typeof gr[x] === 'number' || gr[x] === null) continue;\n\t\t\n\t\t\t\t\tconst td = tds[i]\n\t\t\t\t\tconst col = parseInt(td.getAttribute('colSpan') ?? 1, 10);\n\t\t\t\t\tconst row = parseInt(td.getAttribute('rowSpan') ?? 1, 10);\n\t\t\t\t\tgr[x] = td;\n\t\t\n\t\t\t\t\tif (1 < col) {\n\t\t\t\t\t\tfor (let p = 1; p < col; p += 1) gr[x + p] = p;\n\t\t\t\t\t}\n\t\t\t\t\tif (1 < row) {\n\t\t\t\t\t\tfor (let q = 1; q < row; q += 1) {\n\t\t\t\t\t\t\tconst nr = g[y + q];\n\t\t\t\t\t\t\tfor (let p = 0; p < col; p += 1) nr[x + p] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti += 1;\n\t\t\t\t\tif (tds.length <= i) break;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn g;\n\t\t}\n\t\t\n\t\tfunction collectCells(t, css = []) {\n\t\t\tfor (const tr of t.rows) {\n\t\t\t\tconst cs = [];\n\t\t\t\tif (tr.hasChildNodes()) {\n\t\t\t\t\tfor (const n of tr.childNodes) {\n\t\t\t\t\t\tconst tn = n.tagName;\n\t\t\t\t\t\tif (tn === 'TD' || tn === 'TH') cs.push(n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcss.push(cs);\n\t\t\t}\n\t\t\treturn css;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction getMetrics(tab, grid) {\n\t\t\tconst origTabW = tab.clientWidth;\n\t\t\tconst origCellWs = [];\n\t\t\tfor (let x = 0; x < grid[0].length; x += 1) {\n\t\t\t\tfor (let y = 0; y < grid.length; y += 1) {\n\t\t\t\t\tconst g = grid[y][x];\n\t\t\t\t\tif (g instanceof HTMLTableCellElement && !g.getAttribute('colSpan')) {\n\t\t\t\t\t\torigCellWs.push(g.clientWidth);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn { origTabW, origCellWs };\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction calcNewWidths(grid, met) {\n\t\t\tfor (const gr of grid) {\n\t\t\t\tfor (const gc of gr) {\n\t\t\t\t\tif (typeof gc !== 'number' && gc !== null) gc.style.whiteSpace = 'nowrap';\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst gw = grid[0].length;\n\t\t\tconst newWs = new Array(gw).fill(0);\n\t\t\tconst fixWs = new Array(gw).fill(0);\n\t\t\n\t\t\tfor (const gr of grid) {\n\t\t\t\tfor (let x = 0; x < gw; x += 1) {\n\t\t\t\t\tconst td = gr[x];\n\t\t\t\t\tif (td === undefined || td === null || typeof td === 'number') continue;\n\t\t\t\t\tif (x < gw - 1 && typeof gr[x + 1] === 'number') continue;\n\t\t\t\t\tif (1 < parseInt(td.getAttribute('colSpan'), 10)) continue;\n\t\t\t\t\tif (1 < parseInt(td.getAttribute('rowSpan'), 10)) continue;\n\t\t\n\t\t\t\t\tconst minW = calcMinWidth(td, met);\n\t\t\t\t\tnewWs[x] = Math.max(newWs[x], minW);\n\t\t\t\t\tif (!minW) fixWs[x] = Math.max(fixWs[x], td.clientWidth);\n\t\t\t\t}\n\t\t\t}\n\t\t\twidenTabWidth(newWs, fixWs, met);\n\t\t\treturn newWs;\n\t\t}\n\t\t\n\t\tfunction calcMinWidth(td, met) {\n\t\t\tconst { padH, padV, charW, lineH, dcTd, dcTh, cellMinWidth, cellMinAspect, cellMinLength } = met;\n\t\t\tif (calcMaxLineLength(td) < cellMinLength) return 0;\n\t\t\n\t\t\ttd.innerHTML = td.innerHTML.trim();\n\t\t\tconst dc = td.tagName === 'TD' ? dcTd : dcTh;\n\t\t\tdc.innerHTML = td.innerHTML;\n\t\t\tconst aw = dc.clientWidth - padH;\n\t\t\tconst ls = Math.round((dc.clientHeight - padV) / lineH);\n\t\t\tlet minW = 0;\n\t\t\tfor (let i = 2;; i += 1) {\n\t\t\t\tconst tempW = 0 | (aw / i + charW * i + padH);\n\t\t\t\tconst tempH = ls * (i * lineH) + padV;\n\t\t\t\tif (tempW < cellMinWidth || tempW / tempH < cellMinAspect || (minW && minW < tempW)) break;\n\t\t\t\tminW = tempW;\n\t\t\t}\n\t\t\treturn (minW + charW < dc.clientWidth) ? minW : 0;\n\t\t}\n\t\t\n\t\tfunction calcMaxLineLength(td) {\n\t\t\tconst ih = td.innerHTML.trim();\n\t\t\tconst ls = ih.split(/<\\s*br\\s*\\/?>/ui);\n\t\t\tconst ts = ls.map(e => e.replace(/<(\"[^\"]*\"|'[^']*'|[^'\">])*>/g, '').length);\n\t\t\treturn Math.max(...ts);\n\t\t}\n\t\t\n\t\tfunction widenTabWidth(newWs, fixWs, met) {\n\t\t\tconst { origTabW, origCellWs } = met;\n\t\t\tlet wNew = 0, wFix = 0;\n\t\t\tfor (let i = 0; i < newWs.length; i += 1) {\n\t\t\t\tif (newWs[i]) {\n\t\t\t\t\twNew += newWs[i];\n\t\t\t\t} else {\n\t\t\t\t\twFix += fixWs[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (origTabW < wNew + wFix) return;\n\t\t\tlet rem = origTabW - wFix;\n\t\t\tfor (let i = 0; i < newWs.length; i += 1) {\n\t\t\t\tif (!newWs[i]) continue;\n\t\t\t\tconst nw = newWs[i];\n\t\t\t\tconst w = Math.min(nw / wNew * rem, origCellWs[i]);\n\t\t\t\trem  -= (w - nw);\n\t\t\t\twNew -= (w - nw);\n\t\t\t\tnewWs[i] = 0 | w;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction setCellWidth(grid, ws) {\n\t\t\tfor (const gr of grid) {\n\t\t\t\tfor (let x = 0; x < gr.length; x += 1) {\n\t\t\t\t\tconst gc = gr[x], w = ws[x];\n\t\t\t\t\tif (!w || !(gc instanceof HTMLTableCellElement)) continue;\n\t\t\t\t\tgc.style.whiteSpace = null;\n\t\t\t\t\tgc.style.minWidth   = w + 'px';\n\t\t\t\t\tgc.style.width      = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tNS.applyNeatWidth = apply;\n\t}\n\t{\n\t\t/**\n\t\t * Usable View\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2023-03-01\n\t\t */\n\t\t\n\t\tfunction apply(tabs, opts = {}) {\n\t\t\tif (tabs.length === 0) return;\n\t\t\tconst cm = Object.assign({\n\t\t\t\tcapableWindowHeightRate: 0.9,\n\t\t\t\tstyleHeaderContainer   : ':ncTableStickyHeaderContainer',\n\t\t\t\tstyleHeaderTable       : ':ncTableStickyHeaderTable',\n\t\t\t\tstyleScrollBar         : ':ncTableStickyScrollBar',\n\t\t\n\t\t\t\tstyleScrollRight: ':ncScrollRight',\n\t\t\t\tstyleScrollLeft : ':ncScrollLeft',\n\t\t\t\toffset          : 0,\n\t\t\t}, opts);\n\t\t\n\t\t\tconst cs = [], ts = [...tabs];\n\t\t\tfor (const tab of ts) {\n\t\t\t\tconst head = _createHeaderClone(tab, cm);\n\t\t\t\tconst bar  = _createBarClone(tab, cm);\n\t\t\t\tcs.push({ tab, head, bar });\n\t\t\n\t\t\t\tlet forced = null;\n\t\t\t\tconst el = (self, op) => throttle(() => {\n\t\t\t\t\tif (forced && forced !== self) {\n\t\t\t\t\t\tforced = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tforced = self;\n\t\t\t\t\t\top.scrollLeft = self.scrollLeft;\n\t\t\t\t\t\tif (head) onTableScroll(tab, head, cm);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttab.addEventListener('scroll', el(tab, bar));\n\t\t\t\tbar.addEventListener('scroll', el(bar, tab));\n\t\t\t}\n\t\t\tconst ro = new ResizeObserver((es) => {\n\t\t\t\tfor (const e of es) {\n\t\t\t\t\tconst idx = ts.indexOf(e.target);\n\t\t\t\t\tconst c = cs[idx];\n\t\t\t\t\tdoResize(e.contentRect, c.tab, c.head, c.bar, cm);\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (const t of ts) ro.observe(t);\n\t\t\n\t\t\twindow.addEventListener('scroll', throttle(() => {\n\t\t\t\tlet maxHeadH = 0;\n\t\t\t\tfor (const c of cs) {\n\t\t\t\t\tonWindowScroll(c.tab, c.head, c.bar, cm);\n\t\t\t\t\tmaxHeadH = Math.max(maxHeadH, c.head?.offsetHeight ?? 0);\n\t\t\t\t}\n\t\t\t\tsetScrollPaddingTop('nacss-table', maxHeadH);\n\t\t\t}), { passive: true });\n\t\t\n\t\t\tinitializeScrollPaddingTop();\n\t\t\n\t\t\tlet st = null;\n\t\t\tconst fn = () => {\n\t\t\t\tcm.offset = getScrollPaddingTop('nacss-table');\n\t\t\t\tif (st) clearTimeout(st);\n\t\t\t\tst = setTimeout(() => {\n\t\t\t\t\tfor (const c of cs) doResize(null, c.tab, c.head, c.bar, cm);\n\t\t\t\t}, 100);\n\t\t\t};\n\t\t\tonResize(fn, true);\n\t\t\tconst mo = new MutationObserver(fn);\n\t\t\tmo.observe(document.documentElement, { attributes: true });\n\t\t}\n\t\t\n\t\tfunction _createHeaderClone(tab, cm) {\n\t\t\tlet thead = tab.tHead;\n\t\t\tif (!thead) {\n\t\t\t\tthead = _createPseudoHeader(tab);\n\t\t\t\tif (!thead) return null;\n\t\t\t\ttab.tHead = thead;\n\t\t\t}\n\t\t\tconst hc = document.createElement('div');\n\t\t\tsetClass(hc, cm.styleHeaderContainer);\n\t\t\ttab.parentNode.appendChild(hc);\n\t\t\n\t\t\tconst ht = document.createElement('div');\n\t\t\tsetClass(ht, cm.styleHeaderTable);\n\t\t\thc.appendChild(ht);\n\t\t\n\t\t\tht.appendChild(thead.cloneNode(true));\n\t\t\treturn hc;\n\t\t}\n\t\t\n\t\tfunction _createPseudoHeader(tab) {\n\t\t\tconst trs = tab.tBodies[0].rows;\n\t\t\tif (trs.length === 0) return null;\n\t\t\n\t\t\tfunction containsOnlyTh(tr) {\n\t\t\t\tconst tds = tr.getElementsByTagName('td');\n\t\t\t\tconst ths = tr.getElementsByTagName('th');\n\t\t\t\tif (tds.length === 0 && ths.length > 0) return true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst trsH = [];\n\t\t\tfor (const tr of trs) {\n\t\t\t\tif (!containsOnlyTh(tr)) break;\n\t\t\t\ttrsH.push(tr);\n\t\t\t}\n\t\t\tif (trsH.length === 0) return null;\n\t\t\n\t\t\tconst thead = tab.createTHead();\n\t\t\tfor (const tr of trsH) thead.appendChild(tr);\n\t\t\treturn thead;\n\t\t}\n\t\t\n\t\tfunction _createBarClone(tab, cm) {\n\t\t\tconst bar = document.createElement('div');\n\t\t\tsetClass(bar, cm.styleScrollBar);\n\t\t\tconst spacer = document.createElement('div');\n\t\t\tbar.appendChild(spacer);\n\t\t\ttab.parentNode.appendChild(bar);\n\t\t\treturn bar;\n\t\t}\n\t\t\n\t\t\n\t\t// ---------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction doResize(r, tab, head, bar, cm) {\n\t\t\ttab.style.overflowX = (tab.scrollWidth < tab.clientWidth + 2) ? 'hidden' : null;\n\t\t\n\t\t\tif (head) _updateHeaderSize(r, tab, head, cm);\n\t\t\tif (bar) _updateScrollBarSize(tab, bar);\n\t\t\tif (head || bar) onWindowScroll(tab, head, bar, cm);\n\t\t\tif (head) onTableScroll(tab, head, cm);\n\t\t}\n\t\t\n\t\tfunction _updateHeaderSize(r, tab, head, cm) {\n\t\t\tconst tw = r ? r.width : tab.offsetWidth;\n\t\t\thead.style.maxWidth = tw + 'px';\n\t\t\thead.style.display  = 'none';\n\t\t\thead.style.top      = cm.offset + 'px';\n\t\t\n\t\t\tconst thead = tab.tHead;\n\t\t\tconst ht    = head.firstChild;\n\t\t\n\t\t\thead.style.setProperty('--nc-width', `${thead.offsetWidth}px`);\n\t\t\thead.style.setProperty('--nc-height', `${thead.offsetHeight}px`);\n\t\t\n\t\t\tconst oTrs = thead.rows;\n\t\t\tconst cTrs = ht.firstChild.rows;\n\t\t\tfor (let i = 0; i < oTrs.length; i += 1) {\n\t\t\t\tcopyWidth(oTrs[i], cTrs[i], 'td');\n\t\t\t\tcopyWidth(oTrs[i], cTrs[i], 'th');\n\t\t\t}\n\t\t\tfunction copyWidth(o, c, tag) {\n\t\t\t\tconst os = o.getElementsByTagName(tag);\n\t\t\t\tconst cs = c.getElementsByTagName(tag);\n\t\t\t\tfor (let i = 0; i < os.length; i += 1) {\n\t\t\t\t\tcs[i].style.width = os[i].offsetWidth + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction _updateScrollBarSize(tab, bar) {\n\t\t\tconst disabled = (tab.scrollWidth < tab.clientWidth + 2);\n\t\t\tbar.style.overflowX     = disabled ? 'hidden' : null;\n\t\t\tbar.style.pointerEvents = disabled ? 'none'   : null;\n\t\t\tbar.style.maxWidth      = `${tab.clientWidth}px`;\n\t\t\tbar.style.display       = 'none';\n\t\t\n\t\t\tconst h = parseInt(getScrollBarWidth(document.documentElement));\n\t\t\tif (0 < h) {\n\t\t\t\tbar.style.height = (h + 2 + 1) + 'px';\n\t\t\t}\n\t\t\tbar.firstChild.style.width = `${tab.scrollWidth}px`;\n\t\t}\n\t\t\n\t\t\n\t\t// ---------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction onWindowScroll(tab, head, bar, cm) {\n\t\t\tconst r = tab.getBoundingClientRect();\n\t\t\tconst tBottom = r.bottom;\n\t\t\tconst rh = (tab.tHead ?? tab.tBodies[0]).getBoundingClientRect();\n\t\t\tconst hTop = rh.top, hBottom = rh.bottom;\n\t\t\tconst wY0 = cm.offset, wY1 = window.innerHeight;\n\t\t\n\t\t\tconst inView = tBottom - hTop < cm.capableWindowHeightRate * (wY1 - wY0);\n\t\t\tconst tLeft = r.left, tScrollLeft = tab.scrollLeft;\n\t\t\tif (head) {\n\t\t\t\tconst hCy = tab.tHead.offsetHeight;\n\t\t\t\tconst f = (!inView && hTop < wY0 && wY0 < tBottom - hCy);\n\t\t\t\t_updateHeaderVisibility(head, f, tLeft, tScrollLeft);\n\t\t\t}\n\t\t\tif (bar) {\n\t\t\t\tconst f = (!inView && hBottom < wY1 && wY1 < tBottom);\n\t\t\t\t_updateBarVisibility(bar, f, tLeft, tScrollLeft);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction _updateHeaderVisibility(head, visible, tabLeft, tabScrollLeft) {\n\t\t\thead.style.display = visible ? 'block' : 'none';\n\t\t\thead.style.left    = tabLeft + 'px';\n\t\t\thead.scrollLeft    = tabScrollLeft;\n\t\t}\n\t\t\n\t\tfunction _updateBarVisibility(bar, visible, tabLeft, tabScrollLeft) {\n\t\t\tbar.style.display = visible ? 'block' : 'none';\n\t\t\tbar.style.left    = tabLeft + 'px';\n\t\t\tbar.scrollLeft    = tabScrollLeft;\n\t\t}\n\t\t\n\t\t\n\t\t// ---------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction onTableScroll(tab, head, cm) {\n\t\t\tconst sL = Math.max(0, Math.min(tab.scrollLeft, tab.scrollWidth - tab.offsetWidth));  // for iOS\n\t\t\thead.scrollLeft = sL;\n\t\t\n\t\t\tif (tab.scrollWidth - tab.clientWidth > 2) {  // for avoiding needless scrolling\n\t\t\t\tconst r = tab.scrollLeft / (tab.scrollWidth - tab.clientWidth);\n\t\t\t\tsetClass(head, cm.styleScrollRight, r < 0.95);\n\t\t\t\tsetClass(head, cm.styleScrollLeft, 0.05 < r);\n\t\t\t} else {\n\t\t\t\tsetClass(head, cm.styleScrollRight, false);\n\t\t\t\tsetClass(head, cm.styleScrollLeft, false);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t// Utilities ---------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction getScrollBarWidth(parent) {\n\t\t\tconst d = document.createElement('div');\n\t\t\td.setAttribute('style', 'position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;');\n\t\t\tparent.appendChild(d);\n\t\t\tlet width = 0 | window.getComputedStyle(d).getPropertyValue('width');\n\t\t\n\t\t\tif (width === 0) {  // Window does not have any scroll bar\n\t\t\t\td.style.overflowY = 'scroll';\n\t\t\t\td.style.width = '';\n\t\t\t\tconst c = document.createElement('div');\n\t\t\t\tc.style.minHeight = '100px';\n\t\t\t\td.appendChild(c);\n\t\t\t\tconst cw = 0 | window.getComputedStyle(c).getPropertyValue('width');\n\t\t\t\twidth = d.offsetWidth - cw;\n\t\t\t}\n\t\t\tparent.removeChild(d);\n\t\t\treturn width;\n\t\t}\n\t\tNS.applyUsableView = apply;\n\t}\n\t/**\n\t * Scroll Padding Top\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2023-02-23\n\t */\n\t\n\tfunction initializeScrollPaddingTop() {\n\t\tconst de = document.documentElement;\n\t\tif (de.getAttribute('data-scroll-padding-top') !== null) return;\n\t\tde.setAttribute('data-scroll-padding-top', '');\n\t\n\t\tconst mo = new MutationObserver((ms, mo) => update(mo));\n\t\tmo.observe(de, { attributes: true });\n\t\tupdate(mo);\n\t\n\t\tfunction update(mo) {\n\t\t\tconst de = document.documentElement;\n\t\n\t\t\tmo.disconnect();\n\t\t\tde.style.scrollPaddingTop = null;\n\t\n\t\t\tconst v = parseInt(getComputedStyle(de).scrollPaddingTop);\n\t\t\tsetScrollPaddingTop('default', Number.isNaN(v) ? 0 : v);\n\t\n\t\t\tde.style.scrollPaddingTop = getScrollPaddingTop() + 'px';\n\t\t\tmo.observe(de, { attributes: true });\n\t\t}\n\t}\n\t\n\tfunction setScrollPaddingTop(key, val) {\n\t\tconst de = document.documentElement;\n\t\tconst at = de.getAttribute('data-scroll-padding-top');\n\t\tconst vs = at ? new Map(at.split(',').map(e => e.split(':'))) : new Map();\n\t\tif (val) {\n\t\t\tvs.set(key, val);\n\t\t} else {\n\t\t\tvs.delete(key);\n\t\t}\n\t\tconst newAt = [...vs].map(e => e.join(':')).join(',');\n\t\tif (newAt !== at) {\n\t\t\tde.setAttribute('data-scroll-padding-top', newAt);\n\t\t}\n\t}\n\t\n\tfunction getScrollPaddingTop(without = null) {\n\t\tconst de = document.documentElement;\n\t\tconst at = de.getAttribute('data-scroll-padding-top');\n\t\tif (!at) return 0;\n\t\n\t\tconst vs = at.split(',').map(e => e.split(':')).filter(([key,]) => key !== without).map(([k, v]) => parseInt(v));\n\t\treturn vs.reduce((a, b) => a + b, 0);\n\t}\n\t\n\n})(window['NACSS']['table']);\n"]}