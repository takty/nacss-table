window.NACSS=window.NACSS||{},function(t){let e;function i(t){let e;return()=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t()})))}}class l{constructor(t){this._table=t,this._headerHeight=0,this._windowWidth=0,this._create(),setTimeout((()=>{this._initialize()}),10)}_create(){this._head=this._createHeaderClone(),this._sbar=this._createScrollBarClone();const t=this._table.getElementsByTagName("caption");this._capt=t.length?t[0]:null}_createHeaderClone(){let t=this._table.tHead;if(!t){if(t=this._createPseudoHeader(),!t)return null;this._table.tHead=t}const e=document.createElement("div");e.dataset.stile+=" fixed-table-header-container",this._table.parentNode.appendChild(e);const i=document.createElement("div");i.dataset.stile+=" fixed-table-header-table",e.appendChild(i);const l=t.cloneNode(!0);return i.appendChild(l),e}_createPseudoHeader(){const t=this._table.tBodies[0].rows;if(0===t.length)return null;function e(t){const e=t.getElementsByTagName("td"),i=t.getElementsByTagName("th");return 0===e.length&&i.length>0}const i=[];for(let l=0,s=t.length;l<s;l+=1){const s=t[l];if(!e(s))break;i.push(s)}if(0===i.length)return null;const l=this._table.createTHead();for(let t=0;t<i.length;t+=1)l.appendChild(i[t]);return l}_createScrollBarClone(){const t=document.createElement("div");t.dataset.stile+=" fixed-table-scroll-bar";const e=document.createElement("div");return t.appendChild(e),this._table.parentNode.appendChild(t),t}_initialize(){this._initTableScroll(),this.onWindowResize()}_initTableScroll(){let t=!1,e=!1;this._table.addEventListener("scroll",i((()=>{t?t=!1:(this._sbar.scrollLeft=this._table.scrollLeft,e=!0),this._onTableScroll()}))),this._sbar.addEventListener("scroll",i((()=>{e?e=!1:(this._table.scrollLeft=this._sbar.scrollLeft,t=!0)})))}_isScrollable(){const t=this._table;return t.scrollWidth-t.clientWidth>2}onWindowResize(){const t=this._table;t.style.overflowX=t.scrollWidth<t.clientWidth+2?"hidden":"";const e=Math.min(window.outerWidth,window.innerWidth);this._windowWidth!==e&&(this._windowWidth=e,this._head&&this._updateHeaderSize(this._head),this._sbar&&this._updateScrollBarSize(this._sbar),(this._head||this._sbar)&&this.onWindowScroll(),this._onTableScroll())}_updateHeaderSize(t){t.style.maxWidth=this._table.getBoundingClientRect().width+"px",t.style.display="none",t.style.top="0px";const e=this._table.tHead;let i=e.getBoundingClientRect().width;const l=t.firstChild;l.style.width=i+"px";const s=l.firstChild,n=e.rows,o=s.rows;for(let t=0;t<n.length;t+=1)a(n[t],o[t],"td"),a(n[t],o[t],"th");function a(t,e,i){const l=t.getElementsByTagName(i),s=e.getElementsByTagName(i);for(let t=0;t<l.length;t+=1)s[t].style.width=l[t].getBoundingClientRect().width+"px"}this._headerHeight=e.getBoundingClientRect().height}_updateScrollBarSize(t){t.style.maxWidth=`${this._table.clientWidth}px`,t.style.display="none";const e=parseInt(s());0<e&&(t.style.height=e+2+"px"),t.firstChild.style.width=`${this._table.scrollWidth}px`}onWindowScroll(){const t=this._table.getBoundingClientRect(),e=t.top,i=t.bottom,l=this._capt?this._capt.offsetHeight:0,s=this._headerHeight,n=i-e-l<.9*(window.innerHeight-0);let o=!1;n||0<e+l||i-s<0||e+l<0&&(o=!0);let a=!1;n||window.innerHeight<e+l+s||i<window.innerHeight||this._isScrollable()&&(a=!0),this._head&&this.updateHeaderVisibility(o,t.left),this._sbar&&this.updateScrollBarVisibility(a,t.left)}updateHeaderVisibility(t,e){const i=this._head;t?(i.style.top="0px",i.style.display="block"):i.style.display="none",i.style.left=e+"px",i.scrollLeft=this._table.scrollLeft}updateScrollBarVisibility(t,e){const i=this._sbar;i.style.display=t?"block":"none",i.style.left=e+"px",i.scrollLeft=this._table.scrollLeft}_onTableScroll(){const t=this._table,e=this._head,i=Math.max(0,Math.min(t.scrollLeft,t.scrollWidth-t.offsetWidth));e&&(e.scrollLeft=i)}}function s(){const t=document.createElement("div");t.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),document.body.appendChild(t);let e=0|window.getComputedStyle(t).getPropertyValue("width");if(0===e){t.style.overflowY="scroll",t.style.width="";const i=document.createElement("div");i.style.minHeight="100px",t.appendChild(i);const l=0|window.getComputedStyle(i).getPropertyValue("width");e=t.offsetWidth-l}return document.body.removeChild(t),e}t.tableUsableView=function(t){e=parseInt(s());const n=[];for(let e=0;e<t.length;e+=1)n.push(new l(t[e]));window.addEventListener("scroll",i((()=>{for(let t=0;t<n.length;t+=1)n[t].onWindowScroll()})),{passive:!0}),window.addEventListener("resize",i((()=>{for(let t=0;t<n.length;t+=1)n[t].onWindowResize()})),{passive:!0})}}(window.NACSS);
//# sourceMappingURL=table-usable-view.min.js.map
