window.NACSS=window.NACSS||{},function(t){let e;function i(t){let e;function i(){e=!1,t()}return()=>{e||(e=!0,requestAnimationFrame(i))}}class l{constructor(t){t.style.height&&(t.style.height=""),this._table=t,this._headerHeight=0,this._isEnlarged=!1,this._windowWidth=Math.min(window.outerWidth,window.innerWidth),this._create(),setTimeout((()=>{this._initialize()}),10)}_create(){this._sbar=this._createScrollBarClone();const t=this._table.getElementsByTagName("caption");this._capt=t.length?t[0]:null,this._capt&&(this._capt.innerHTML=`<span>${this._capt.innerHTML}</span>`)}_createScrollBarClone(){const t=document.createElement("div");t.dataset.stile+=" fixed-table-scroll-bar",this._table.parentNode.appendChild(t);const e=document.createElement("div");return t.appendChild(e),t}_initialize(){const t=getComputedStyle(this._table).backgroundColor;t&&"transparent"!==t&&(this._table.dataset.background=t),this._initTableScroll(),this._resize(),this._adjustUnexpectedScrollBar()}_initTableScroll(){let t=!1,e=!1;this._table.addEventListener("scroll",i((()=>{t?t=!1:(this._sbar.scrollLeft=this._table.scrollLeft,e=!0),this._onTableScroll()}))),this._sbar.addEventListener("scroll",i((()=>{e?e=!1:(this._table.scrollLeft=this._sbar.scrollLeft,t=!0)})))}_isScrollable(){const t=this._table;return t.scrollWidth-t.clientWidth>2}onWindowResize(){this._adjustUnexpectedScrollBar();const t=Math.min(window.outerWidth,window.innerWidth);this._windowWidth!==t&&(this._windowWidth=t,this._resize())}_adjustUnexpectedScrollBar(){const t=this._table;t.style.overflowX=t.scrollWidth<t.clientWidth+2?"hidden":""}_resize(){this._sbar&&this._updateScrollBarSize(this._sbar),this._sbar&&this.onWindowScroll(),this._onTableScroll()}_updateScrollBarSize(t){t.style.maxWidth=this._table.clientWidth+"px",t.style.display="none";const e=parseInt(s());0<e&&(t.style.height=e+2+"px");const i=this._table.tBodies[0];t.firstChild.style.width=Math.ceil(i.clientWidth)+"px"}onWindowScroll(){const t=this._table.getBoundingClientRect(),e=t.top,i=t.bottom,l=this._capt?this._capt.offsetHeight:0,s=this._headerHeight;let n=!1;i-e-l<.9*(window.innerHeight-0)||window.innerHeight<e+l+s||i<window.innerHeight||this._isScrollable()&&(n=!0),this._sbar&&this.updateScrollBarVisibility(n,t.left)}updateScrollBarVisibility(t,e){const i=this._sbar;i.style.display=t?"block":"none",i.style.left=e+"px",i.scrollLeft=this._table.scrollLeft}_onTableScroll(){this._isScrollable()&&this._calcShadeStyle()}_calcShadeStyle(){const t=this._table,e=t.scrollLeft/(t.scrollWidth-t.clientWidth);e<.1?t.classList.remove("left-shade"):t.classList.add("left-shade"),.9<e?t.classList.remove("right-shade"):t.classList.add("right-shade")}}function s(){const t=document.createElement("div");t.style.bottom="100%",t.style.height="1px",t.style.position="absolute",t.style.width="calc(100vw - 100%)",document.body.appendChild(t);let e=0|window.getComputedStyle(t,"").getPropertyValue("width");if(0===e){t.style.overflowY="scroll",t.style.width="";const i=document.createElement("div");i.style.minHeight="100px",t.appendChild(i);const l=0|window.getComputedStyle(i,"").getPropertyValue("width");e=t.offsetWidth-l}return document.body.removeChild(t),e}t.tableScroll=function(t){e=parseInt(s());const n=[];for(let e=0;e<t.length;e+=1)n.push(new l(t[e]));window.addEventListener("scroll",i((()=>{for(let t=0;t<n.length;t+=1)n[t].onWindowScroll()})),{passive:!0}),window.addEventListener("resize",i((()=>{for(let t=0;t<n.length;t+=1)n[t].onWindowResize()})),{passive:!0})}}(window.NACSS);
//# sourceMappingURL=table-scroll.min.js.map
