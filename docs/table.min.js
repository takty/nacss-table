window.NACSS=window.NACSS||{},function(t){!function(){function e(t,e){const n=document.createElement(e);return n.setAttribute("style","position:fixed;display:inline-block;visibility:hidden;white-space:nowrap;"),t.appendChild(n)}function n(t,e){t.removeChild(e.dcTd),t.removeChild(e.dcTh)}function i(t,e){if(0===t.rows.length)return!1;if(e.maxRowSize<t.rows.length)return!1;const{cellMinWidth:n,cellMinAspect:i}=e;for(const e of t.rows)if(e.hasChildNodes())for(const t of e.childNodes){const e=t.tagName;if("TD"!==e&&"TH"!==e)continue;if(1<parseInt(t.getAttribute("colSpan"),10))continue;if(1<parseInt(t.getAttribute("rowSpan"),10))continue;const l=t.clientWidth,o=t.clientHeight;if(l<n||l/o<i)return!0}return!1}function l(t,e){e.startsWith(":")?t.dataset[e.substr(1)]="":t.classList.add(e.substr(1))}function o(t,e){e.startsWith(":")?delete t.dataset[e.substr(1)]:t.classList.remove(e.substr(1))}function s(t,e){if(t.scrollWidth-t.clientWidth>2){const n=t.scrollLeft/(t.scrollWidth-t.clientWidth);(.95<n?o:l)(t,e.styleScrollRight),(n<.05?o:l)(t,e.styleScrollLeft)}else o(t,e.styleScrollRight),o(t,e.styleScrollLeft)}function r(t,e){t.removeAttribute("width"),t.style.width=null,t.style.height=null;const n=function(t){const e=function(t,e=[]){for(const n of t.rows){const t=[];if(n.hasChildNodes())for(const e of n.childNodes){const n=e.tagName;"TD"!==n&&"TH"!==n||t.push(e)}e.push(t)}return e}(t);let n=0;for(const t of e)n=Math.max(n,t.length);const i=[];for(const t of e)i.push(new Array(n));for(let t=0;t<i.length;t+=1){const l=i[t],o=e[t];let s=0;for(let e=0;e<n;e+=1){if("number"==typeof l[e]||null===l[e])continue;const n=o[s],r=parseInt(n.getAttribute("colSpan")??1,10),a=parseInt(n.getAttribute("rowSpan")??1,10);if(l[e]=n,1<r)for(let t=1;t<r;t+=1)l[e+t]=t;if(1<a)for(let n=1;n<a;n+=1){const l=i[t+n];for(let t=0;t<r;t+=1)l[e+t]=null}if(s+=1,o.length<=s)break}}return i}(t);!function(t,e){for(const n of t)for(let t=0;t<n.length;t+=1){const i=n[t],l=e[t];l&&i instanceof HTMLTableCellElement&&(i.style.whiteSpace=null,i.style.minWidth=l+"px",i.style.width=null)}}(n,function(t,e){for(const e of t)for(const t of e)"number"!=typeof t&&null!==t&&(t.style.whiteSpace="nowrap");const n=t[0].length,i=new Array(n).fill(0),l=new Array(n).fill(0);for(const o of t)for(let t=0;t<n;t+=1){const s=o[t];if(null==s||"number"==typeof s)continue;if(t<n-1&&"number"==typeof o[t+1])continue;if(1<parseInt(s.getAttribute("colSpan"),10))continue;if(1<parseInt(s.getAttribute("rowSpan"),10))continue;const r=a(s,e);i[t]=Math.max(i[t],r),r||(l[t]=Math.max(l[t],s.clientWidth))}return function(t,e,n){const{origTabW:i,origCellWs:l}=n;let o=0,s=0;for(let n=0;n<t.length;n+=1)t[n]?o+=t[n]:s+=e[n];if(i<o+s)return;let r=i-s;for(let e=0;e<t.length;e+=1){if(!t[e])continue;const n=t[e],i=Math.min(n/o*r,l[e]);r-=i-n,o-=i-n,t[e]=0|i}}(i,l,e),i}(n,Object.assign(function(t,e){const n=t.clientWidth,i=[];for(let t=0;t<e[0].length;t+=1)for(let n=0;n<e.length;n+=1){const l=e[n][t];if(l instanceof HTMLTableCellElement&&!l.getAttribute("colSpan")){i.push(l.clientWidth);break}}return{origTabW:n,origCellWs:i}}(t,n),e)));const i=t.getElementsByTagName("caption");i.length&&(i[0].innerHTML=`<span>${i[0].innerHTML}</span>`)}function a(t,e){const{padH:n,padV:i,charW:l,lineH:o,dcTd:s,dcTh:r,cellMinWidth:a,cellMinAspect:c,cellMinLength:d}=e;if(function(t){const e=t.innerHTML.trim(),n=e.split(/<\s*br\s*\/?>/iu).map((t=>t.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"").length));return Math.max(...n)}(t)<d)return 0;t.innerHTML=t.innerHTML.trim();const h="TD"===t.tagName?s:r;h.innerHTML=t.innerHTML;const f=h.clientWidth-n,u=Math.round((h.clientHeight-i)/o);let p=0;for(let t=2;;t+=1){const e=0|f/t+l*t+n,s=u*(t*o)+i;if(e<a||e/s<c||p&&p<e)break;p=e}return p+l<h.clientWidth?p:0}t.tableNeatWidth=function(t,o={}){if(0===t.length)return;const a=t[t.length-1],c=Object.assign({fullWidthRate:.95,cellMinWidth:80,cellMinAspect:2/3,cellMinLength:8,maxRowSize:200,maxBorderWidth:2,before:null,after:null,styleNeat:":ncTableNeat",styleFull:":ncTableFull",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft"},o,function(t){const e=t.getElementsByTagName("td")[0],n=getComputedStyle(e),i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),l=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),[o,s]=function(t){const e=document.createElement(t.nodeName);e.setAttribute("style",`position:fixed;margin:0;padding:0;font-family:${t.style.fontFamily||"inherit"};font-size:${t.style.fontSize||"inherit"};`),e.innerHTML="ã€€",t.parentNode.appendChild(e);const n=e.clientWidth,i=e.clientHeight;return e.parentNode.removeChild(e),[n,i]}(e);return{padH:i,padV:l,charW:o,lineH:s}}(a));c.padH+=2*c.maxBorderWidth,c.padV+=2*c.maxBorderWidth,c.dcTd=e(a,"td"),c.dcTh=e(a,"th");const d=[],h=[];for(const e of t)i(e,c)?d.push(e):h.push(e);c.gcCount=d.length;for(const t of d){const e=!!c.before&&(c.before(t)??0);f=()=>{r(t,c),l(t,c.styleNeat),c.after&&c.after(t),0==--c.gcCount&&n(a,c)},!1===(u=e)?f():setTimeout(f,u)}var f,u;if(c.fullWidthRate)for(const t of h){t.parentElement.clientWidth*c.fullWidthRate<t.clientWidth&&l(t,c.styleFull)}!function(t,e){const n=new ResizeObserver((t=>{for(const n of t)s(n.target,e)}));for(const l of t)n.observe(l),l.addEventListener("scroll",i((()=>{s(l,e)})));function i(t){let e;return()=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t()})))}}}(d,c)}}(),function(){let e;function n(t){let e;return()=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t()})))}}class i{constructor(t){this._table=t,this._headerHeight=0,this._windowWidth=0,this._create(),setTimeout((()=>{this._initialize()}),10)}_create(){this._head=this._createHeaderClone(),this._sbar=this._createScrollBarClone();const t=this._table.getElementsByTagName("caption");this._capt=t.length?t[0]:null}_createHeaderClone(){let t=this._table.tHead;if(!t){if(t=this._createPseudoHeader(),!t)return null;this._table.tHead=t}const e=document.createElement("div");e.dataset.stile+=" fixed-table-header-container",this._table.parentNode.appendChild(e);const n=document.createElement("div");n.dataset.stile+=" fixed-table-header-table",e.appendChild(n);const i=t.cloneNode(!0);return n.appendChild(i),e}_createPseudoHeader(){const t=this._table.tBodies[0].rows;if(0===t.length)return null;function e(t){const e=t.getElementsByTagName("td"),n=t.getElementsByTagName("th");return 0===e.length&&n.length>0}const n=[];for(let i=0,l=t.length;i<l;i+=1){const l=t[i];if(!e(l))break;n.push(l)}if(0===n.length)return null;const i=this._table.createTHead();for(let t=0;t<n.length;t+=1)i.appendChild(n[t]);return i}_createScrollBarClone(){const t=document.createElement("div");t.dataset.stile+=" fixed-table-scroll-bar";const e=document.createElement("div");return t.appendChild(e),this._table.parentNode.appendChild(t),t}_initialize(){this._initTableScroll(),this.onWindowResize()}_initTableScroll(){let t=!1,e=!1;this._table.addEventListener("scroll",n((()=>{t?t=!1:(this._sbar.scrollLeft=this._table.scrollLeft,e=!0),this._onTableScroll()}))),this._sbar.addEventListener("scroll",n((()=>{e?e=!1:(this._table.scrollLeft=this._sbar.scrollLeft,t=!0)})))}_isScrollable(){const t=this._table;return t.scrollWidth-t.clientWidth>2}onWindowResize(){const t=this._table;t.style.overflowX=t.scrollWidth<t.clientWidth+2?"hidden":"";const e=Math.min(window.outerWidth,window.innerWidth);this._windowWidth!==e&&(this._windowWidth=e,this._head&&this._updateHeaderSize(this._head),this._sbar&&this._updateScrollBarSize(this._sbar),(this._head||this._sbar)&&this.onWindowScroll(),this._onTableScroll())}_updateHeaderSize(t){t.style.maxWidth=this._table.getBoundingClientRect().width+"px",t.style.display="none",t.style.top="0px";const e=this._table.tHead;let n=e.getBoundingClientRect().width;const i=t.firstChild;i.style.width=n+"px";const l=i.firstChild,o=e.rows,s=l.rows;for(let t=0;t<o.length;t+=1)r(o[t],s[t],"td"),r(o[t],s[t],"th");function r(t,e,n){const i=t.getElementsByTagName(n),l=e.getElementsByTagName(n);for(let t=0;t<i.length;t+=1)l[t].style.width=i[t].getBoundingClientRect().width+"px"}this._headerHeight=e.getBoundingClientRect().height}_updateScrollBarSize(t){t.style.maxWidth=`${this._table.clientWidth}px`,t.style.display="none";const e=parseInt(l());0<e&&(t.style.height=e+2+"px"),t.firstChild.style.width=`${this._table.scrollWidth}px`}onWindowScroll(){const t=this._table.getBoundingClientRect(),e=t.top,n=t.bottom,i=this._capt?this._capt.offsetHeight:0,l=this._headerHeight,o=n-e-i<.9*(window.innerHeight-0);let s=!1;o||0<e+i||n-l<0||e+i<0&&(s=!0);let r=!1;o||window.innerHeight<e+i+l||n<window.innerHeight||this._isScrollable()&&(r=!0),this._head&&this.updateHeaderVisibility(s,t.left),this._sbar&&this.updateScrollBarVisibility(r,t.left)}updateHeaderVisibility(t,e){const n=this._head;t?(n.style.top="0px",n.style.display="block"):n.style.display="none",n.style.left=e+"px",n.scrollLeft=this._table.scrollLeft}updateScrollBarVisibility(t,e){const n=this._sbar;n.style.display=t?"block":"none",n.style.left=e+"px",n.scrollLeft=this._table.scrollLeft}_onTableScroll(){const t=this._table,e=this._head,n=Math.max(0,Math.min(t.scrollLeft,t.scrollWidth-t.offsetWidth));e&&(e.scrollLeft=n)}}function l(){const t=document.createElement("div");t.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),document.body.appendChild(t);let e=0|window.getComputedStyle(t).getPropertyValue("width");if(0===e){t.style.overflowY="scroll",t.style.width="";const n=document.createElement("div");n.style.minHeight="100px",t.appendChild(n);const i=0|window.getComputedStyle(n).getPropertyValue("width");e=t.offsetWidth-i}return document.body.removeChild(t),e}t.tableUsableView=function(t){e=parseInt(l());const o=[];for(let e=0;e<t.length;e+=1)o.push(new i(t[e]));window.addEventListener("scroll",n((()=>{for(let t=0;t<o.length;t+=1)o[t].onWindowScroll()})),{passive:!0}),window.addEventListener("resize",n((()=>{for(let t=0;t<o.length;t+=1)o[t].onWindowResize()})),{passive:!0})}}()}(window.NACSS);
//# sourceMappingURL=table.min.js.map
