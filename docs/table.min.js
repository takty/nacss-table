window.NACSS=window.NACSS||{},function(t){function e(t,e,n){t?n.startsWith(":")?e.dataset[n.substr(1)]="":e.classList.add(n.substr(1)):n.startsWith(":")?delete e.dataset[n.substr(1)]:e.classList.remove(n.substr(1))}function n(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}!function(){function l(t,e){const n=document.createElement(e);return n.setAttribute("style","position:fixed;display:inline-block;visibility:hidden;white-space:nowrap;"),t.appendChild(n)}function o(t,e){t.removeChild(e.dcTd),t.removeChild(e.dcTh)}function i(t,e){if(0===t.rows.length)return!1;if(e.maxRowSize<t.rows.length)return!1;const{cellMinWidth:n,cellMinAspect:l}=e;for(const e of t.rows)if(e.hasChildNodes())for(const t of e.childNodes){const e=t.tagName;if("TD"!==e&&"TH"!==e)continue;if(1<parseInt(t.getAttribute("colSpan"),10))continue;if(1<parseInt(t.getAttribute("rowSpan"),10))continue;const o=t.clientWidth,i=t.clientHeight;if(o<n||o/i<l)return!0}return!1}function r(t,n){if(t.scrollWidth-t.clientWidth>2){const l=t.scrollLeft/(t.scrollWidth-t.clientWidth);e(l<.95,t,n.styleScrollRight),e(.05<l,t,n.styleScrollLeft)}else e(!1,t,n.styleScrollRight),e(!1,t,n.styleScrollLeft)}function s(t,e){t.removeAttribute("width"),t.style.width&&(t.style.width=null),t.style.height&&(t.style.height=null);const n=function(t){const e=function(t,e=[]){for(const n of t.rows){const t=[];if(n.hasChildNodes())for(const e of n.childNodes){const n=e.tagName;"TD"!==n&&"TH"!==n||t.push(e)}e.push(t)}return e}(t);let n=0;for(const t of e)n=Math.max(n,t.length);const l=[];for(const t of e)l.push(new Array(n));for(let t=0;t<l.length;t+=1){const o=l[t],i=e[t];let r=0;for(let e=0;e<n;e+=1){if("number"==typeof o[e]||null===o[e])continue;const n=i[r],s=parseInt(n.getAttribute("colSpan")??1,10),c=parseInt(n.getAttribute("rowSpan")??1,10);if(o[e]=n,1<s)for(let t=1;t<s;t+=1)o[e+t]=t;if(1<c)for(let n=1;n<c;n+=1){const o=l[t+n];for(let t=0;t<s;t+=1)o[e+t]=null}if(r+=1,i.length<=r)break}}return l}(t);!function(t,e){for(const n of t)for(let t=0;t<n.length;t+=1){const l=n[t],o=e[t];o&&l instanceof HTMLTableCellElement&&(l.style.whiteSpace=null,l.style.minWidth=o+"px",l.style.width=null)}}(n,function(t,e){for(const e of t)for(const t of e)"number"!=typeof t&&null!==t&&(t.style.whiteSpace="nowrap");const n=t[0].length,l=new Array(n).fill(0),o=new Array(n).fill(0);for(const i of t)for(let t=0;t<n;t+=1){const r=i[t];if(null==r||"number"==typeof r)continue;if(t<n-1&&"number"==typeof i[t+1])continue;if(1<parseInt(r.getAttribute("colSpan"),10))continue;if(1<parseInt(r.getAttribute("rowSpan"),10))continue;const s=c(r,e);l[t]=Math.max(l[t],s),s||(o[t]=Math.max(o[t],r.clientWidth))}return function(t,e,n){const{origTabW:l,origCellWs:o}=n;let i=0,r=0;for(let n=0;n<t.length;n+=1)t[n]?i+=t[n]:r+=e[n];if(l<i+r)return;let s=l-r;for(let e=0;e<t.length;e+=1){if(!t[e])continue;const n=t[e],l=Math.min(n/i*s,o[e]);s-=l-n,i-=l-n,t[e]=0|l}}(l,o,e),l}(n,Object.assign(function(t,e){const n=t.clientWidth,l=[];for(let t=0;t<e[0].length;t+=1)for(let n=0;n<e.length;n+=1){const o=e[n][t];if(o instanceof HTMLTableCellElement&&!o.getAttribute("colSpan")){l.push(o.clientWidth);break}}return{origTabW:n,origCellWs:l}}(t,n),e)));const l=t.getElementsByTagName("caption");l.length&&(l[0].innerHTML=`<span>${l[0].innerHTML}</span>`)}function c(t,e){const{padH:n,padV:l,charW:o,lineH:i,dcTd:r,dcTh:s,cellMinWidth:c,cellMinAspect:a,cellMinLength:d}=e;if(function(t){const e=t.innerHTML.trim(),n=e.split(/<\s*br\s*\/?>/iu).map((t=>t.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"").length));return Math.max(...n)}(t)<d)return 0;t.innerHTML=t.innerHTML.trim();const f="TD"===t.tagName?r:s;f.innerHTML=t.innerHTML;const h=f.clientWidth-n,u=Math.round((f.clientHeight-l)/i);let p=0;for(let t=2;;t+=1){const e=0|h/t+o*t+n,r=u*(t*i)+l;if(e<c||e/r<a||p&&p<e)break;p=e}return p+o<f.clientWidth?p:0}t.tableNeatWidth=function(t,c={}){if(0===t.length)return;const a=t[t.length-1],d=Object.assign({fullWidthRate:.95,cellMinWidth:80,cellMinAspect:2/3,cellMinLength:8,maxRowSize:200,maxBorderWidth:2,before:null,after:null,styleNeat:":ncTableNeat",styleFull:":ncTableFull",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft"},c,function(t){const e=t.getElementsByTagName("td")[0],n=getComputedStyle(e),l=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),o=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),[i,r]=function(t){const e=document.createElement(t.nodeName);e.setAttribute("style",`position:fixed;margin:0;padding:0;font-family:${t.style.fontFamily||"inherit"};font-size:${t.style.fontSize||"inherit"};`),e.innerHTML="ã€€",t.parentNode.appendChild(e);const n=e.clientWidth,l=e.clientHeight;return e.parentNode.removeChild(e),[n,l]}(e);return{padH:l,padV:o,charW:i,lineH:r}}(a));d.padH+=2*d.maxBorderWidth,d.padV+=2*d.maxBorderWidth,d.dcTd=l(a,"td"),d.dcTh=l(a,"th");const f=[],h=[];for(const e of t)i(e,d)?f.push(e):h.push(e);d.gcCount=f.length;for(const t of f){const n=!!d.before&&(d.before(t)??0);u=()=>{s(t,d),e(!0,t,d.styleNeat),d.after&&d.after(t),0==--d.gcCount&&o(a,d)},!1===(p=n)?u():setTimeout(u,p)}var u,p;if(d.fullWidthRate)for(const t of h){t.parentElement.clientWidth*d.fullWidthRate<t.clientWidth&&e(!0,t,d.styleFull)}!function(t,e){const l=new ResizeObserver((t=>{for(const n of t)r(n.target,e)}));for(const o of t)l.observe(o),o.addEventListener("scroll",n((()=>{r(o,e)})))}(f,d)}}(),function(){function l(t,n){let l=t.tHead;if(!l){if(l=function(t){const e=t.tBodies[0].rows;if(0===e.length)return null;function n(t){const e=t.getElementsByTagName("td"),n=t.getElementsByTagName("th");return 0===e.length&&n.length>0}const l=[];for(const t of e){if(!n(t))break;l.push(t)}if(0===l.length)return null;const o=t.createTHead();for(const t of l)o.appendChild(t);return o}(t),!l)return null;t.tHead=l}const o=document.createElement("div");e(!0,o,n.styleHeaderContainer),t.parentNode.appendChild(o);const i=document.createElement("div");return e(!0,i,n.styleHeaderTable),o.appendChild(i),i.appendChild(l.cloneNode(!0)),o}function o(t,n){const l=document.createElement("div");e(!0,l,n.styleScrollBar);const o=document.createElement("div");return l.appendChild(o),t.parentNode.appendChild(l),l}function i(t,e,n,l,o){e.style.overflowX=e.scrollWidth<e.clientWidth+2?"hidden":null,n&&function(t,e,n,l){const o=t?t.width:e.getBoundingClientRect().width;n.style.maxWidth=o+"px",n.style.display="none",n.style.top=l.offset+"px";const i=e.tHead,r=i.getBoundingClientRect().width,s=n.firstChild;s.style.width=r+"px";const c=i.rows,a=s.firstChild.rows;for(let t=0;t<c.length;t+=1)d(c[t],a[t],"td"),d(c[t],a[t],"th");function d(t,e,n){const l=t.getElementsByTagName(n),o=e.getElementsByTagName(n);for(let t=0;t<l.length;t+=1)o[t].style.width=l[t].getBoundingClientRect().width+"px"}}(t,e,n,o),l&&function(t,e){const n=t.scrollWidth<t.clientWidth+2;e.style.overflowX=n?"hidden":null,e.style.pointerEvents=n?"none":null,e.style.maxWidth=`${t.clientWidth}px`,e.style.display="none";const l=parseInt(function(t){const e=document.createElement("div");e.setAttribute("style","position:absolute;bottom:100%;width:calc(100vw - 100%);height:1px;"),t.appendChild(e);let n=0|window.getComputedStyle(e).getPropertyValue("width");if(0===n){e.style.overflowY="scroll",e.style.width="";const t=document.createElement("div");t.style.minHeight="100px",e.appendChild(t);const l=0|window.getComputedStyle(t).getPropertyValue("width");n=e.offsetWidth-l}return t.removeChild(e),n}(document.documentElement));0<l&&(e.style.height=l+2+"px");e.firstChild.style.width=`${t.scrollWidth}px`}(e,l),(n||l)&&r(e,n,l,o),n&&s(e,n,o)}function r(t,e,n,l){const o=t.getBoundingClientRect(),i=o.bottom,r=t.tHead.getBoundingClientRect(),s=r.top,c=r.bottom,a=l.offset,d=window.innerHeight,f=i-s<l.capableWindowHeightRate*(d-a),h=o.left,u=t.scrollLeft;if(e){const n=t.tHead.offsetHeight;!function(t,e,n,l){t.style.display=e?"block":"none",t.style.left=n+"px",t.scrollLeft=l}(e,!f&&s<a&&a<i-n,h,u)}if(n){!function(t,e,n,l){t.style.display=e?"block":"none",t.style.left=n+"px",t.scrollLeft=l}(n,!f&&c<d&&d<i,h,u)}}function s(t,n,l){const o=Math.max(0,Math.min(t.scrollLeft,t.scrollWidth-t.offsetWidth));if(n.scrollLeft=o,t.scrollWidth-t.clientWidth>2){const o=t.scrollLeft/(t.scrollWidth-t.clientWidth);e(o<.95,n,l.styleScrollRight),e(.05<o,n,l.styleScrollLeft)}else e(!1,n,l.styleScrollRight),e(!1,n,l.styleScrollLeft)}t.tableUsableView=function(t,e={}){if(0===t.length)return;const c=Object.assign({capableWindowHeightRate:.9,styleHeaderContainer:":fixedTableHeaderContainer",styleHeaderTable:":fixedTableHeaderTable",styleScrollBar:":fixedTableScrollBar",styleFixedHeader:":ncFixedHeader",styleScrollRight:":ncScrollRight",styleScrollLeft:":ncScrollLeft",offset:0},e),a=[],d=[...t];for(const t of d){const e=l(t,c),i=o(t,c);a.push({tab:t,head:e,bar:i});let r=!1;const d=(l,o)=>n((()=>{r?r=!1:(r=!0,o.scrollLeft=l.scrollLeft,e&&s(t,e,c))}));t.addEventListener("scroll",d(t,i)),i.addEventListener("scroll",d(i,t))}const f=new ResizeObserver((t=>{for(const e of t){const t=d.indexOf(e.target),n=a[t];i(e.contentRect,n.tab,n.head,n.bar,c)}}));for(const t of d)f.observe(t);window.addEventListener("scroll",n((()=>{for(const t of a)r(t.tab,t.head,t.bar,c)})),{passive:!0});const h=(u=c.styleFixedHeader).startsWith(":")?`*[data-${u.substr(1).replace(/([A-Z])/g,(t=>"-"+t.charAt(0).toLowerCase()))}]`:`*${u}`;var u;if(h){console.log(h);const t=document.querySelector(h);if(t){new ResizeObserver((t=>{c.offset=t[0].contentRect.bottom;for(const t of a)i(null,t.tab,t.head,t.bar,c)})).observe(t)}}}}()}(window.NACSS);
//# sourceMappingURL=table.min.js.map
